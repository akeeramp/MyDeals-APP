<loading-panel show="isBusy" header="isBusyMsgTitle" description="isBusyMsgDetail"></loading-panel>
<div ng-include="'app/contract/partials/ptModals/pctOverrideReasonModal.html'"></div>
<div ng-include="'app/contract/partials/ptModals/pctGroupModal.html'"></div>

<div id="sum-wrapper">
    <div id="sum-header">
        <div ui-view="summaryContentView"></div>
        <div kendo-tab-strip class="gradTab">
            <ul>
                <li ng-click="selTab('All')" class="k-state-active">All</li>
                <li ng-click="selTab('Fail')">Failures</li>
                <li ng-click="selTab('Pass')">Passes</li>
                <li ng-click="selTab('InComplete')">InCompletes</li>
                <li ng-click="selTab('NA')">NA</li>
            </ul>
            <input ng-model="pctFilter" type="hidden" />
        </div>
        
        <div class="sum-filter-bar toolbar">
            <table style="width: 100%;">
                <tr>
                    <td style="width: 30px; height: 40px;" ng-click="toggleSum()" title="{{ isAllCollapsed ? 'Collapse All' : 'Expand All' }}">
                        <div ng-class="{'rotate-90': !isAllCollapsed}">
                            <i class="chevron linkable intelicon-fast-forward"></i>
                        </div>
                    </td>
                    <td style="width: 130px; height: 40px;"></td>
                    <td>
                        <span class="k-textbox k-space-left" style="width: 330px; margin-top: -1px; margin-left: 15px;">
                            <input type="text" placeholder="Search for pricing strategies, tables or names" ng-model="titleFilter" />
                            <i class="k-icon intelicon-search" style="font-size: 26px; color: #00AEEF; margin-top: -12px;"></i>
                        </span>
                    </td>
                    <td style="text-align: right;">
                    </td>
                </tr>
            </table>
        </div>
        <table style="width: 100%;" class="tbl-header">
            <tr>
                <td style="width: 170px; text-align: center; padding-left: 6px; line-height: 1em;">
                    <btn-run-pct-mct ng-model="root"
                                     contract-id="root.contractData.DC_ID"
                                     last-run="root.contractData.LAST_COST_TEST_RUN"
                                     on-complete="root.refreshContractData"
                                     btn-type="'pct'"
                                     btn-class="'btn-skyblue-sm'"></btn-run-pct-mct>
                </td>
                <td>Pricing Strategy Name | Pricing Table Name</td>
                <td style="width: 120px; text-align: center; line-height: 1em;">Stage/Deal Type</td>
            </tr>
        </table>
        <hr />            
    </div>
    
    <div id="sum-container">
        <div class="sum-main-body">
            <div class="sum-main-container">
                <div ng-repeat="ps in contractData.PRC_ST | filter: customFilter" class="sumPsContainer">
                    <table style="width: 100%;">
                        <tr>
                            <td style="width: 30px; height: 30px;" ng-click="isCollapsed = !isCollapsed">
                                <i class="chevron linkable" ng-class="{'intelicon-down': isCollapsed, 'intelicon-right-next': !isCollapsed}"></i>
                            </td>
                            <td style="width: 140px; text-align: center;">
                                <icon-mct-pct ng-model="ps.COST_TEST_RESULT" can-view="root.CAN_VIEW_COST_TEST" icon-class="'bigIcon'"></icon-mct-pct>
                            </td>
                            <td>
                                <div ng-bind="ps.TITLE" class="bolder linkable" ng-click="gotoContractEditor(ps)" title="Click to open the Pricing Strategy in the Contract Editor"></div>
                            </td>
                            <td style="width: 120px; text-align: center;">
                                <div ng-bind="swapUnderscore(ps.WF_STG_CD)" class="bolder org"></div>
                                <!--<div ng-bind="swapUnderscore(ps.OBJ_SET_TYPE_CD)" class="bolder"></div>-->
                            </td>
                        </tr>
                    </table>
                    
                    <div uib-collapse="!isCollapsed" ng-repeat="pt in ps.PRC_TBL">
                        <table style="width: 100%;">
                            <tr>
                                <td style="width: 30px; height: 30px;" ng-click="isPtCollapsed = !isPtCollapsed; togglePt(ps, pt)">
                                    <i class="chevron linkable" style="font-size: 20px; padding-left: 6px;" ng-class="{'intelicon-down': isPtCollapsed, 'intelicon-right-next': !isPtCollapsed}"></i>
                                </td>
                                <td style="width: 140px; color: #000000; text-align: center;">
                                    <icon-mct-pct ng-model="pt.COST_TEST_RESULT" can-view="root.CAN_VIEW_COST_TEST" icon-class="'medIcon'"></icon-mct-pct>
                                </td>
                                <td style="width: 30px;"></td>
                                <td>
                                    <div ng-bind="pt.TITLE" class="bold linkable" ng-click="gotoContractEditor(ps,pt)" title="Click to open the Pricing Table in the Contract Editor"></div>
                                </td>
                                <td style="width: 120px; text-align: center;">
                                    <div ng-bind="swapUnderscore(pt.OBJ_SET_TYPE_CD)" class="bold"></div>
                                </td>
                            </tr>
                        </table>

                        <div uib-collapse="!isPtCollapsed">
                            <div style="margin-left: 30px;">
                                <div id="sumWipGrid_{{pt.DC_ID}}" class="opUiContainer md dashboard"></div>
                            </div>
                        </div>

                    </div>

                </div>
            </div>
        </div>
    </div>

</div>


<style>
    .ssToolbarBtn .btnPctMct {
        color: #00AEEF;
    }
    #sum-wrapper {
        height: 100%;
        padding: 140px 0 0 0;
        -webkit-box-sizing: border-box;
        -moz-box-sizing: border-box;
        box-sizing: border-box;
    }

    #sum-header {
        height: 140px;
        margin-top: -140px;
        font-size: 14px;
        font-family: "Intel Clear";
        font-weight: 200;
        font-style: normal;
        padding-left: 10px;
        padding-right: 10px;
        padding-top: 10px;
        margin-left: 10px;
        margin-right: 10px;
    }

    #sum-container {
        height: 100%;
        overflow: auto;
    }

    .md-icon {
        padding: 4px 2px 0 5px;
    }

    .md-icon i {
        color: #00AEEF;
    }

    .md-icon a, .md-icon a:hover {
        text-decoration: none;
    }

    .md-icon i:hover {
        color: #003C71 !important;
    }

    .md-icon-disabled {
        padding: 4px 2px 0 5px;
    }

    .md-icon-disabled i {
        color: #00AEEF;
    }

    .divStg {
        width: 60px;
        height: 100%;
        text-align: center;
        padding-top: 5px;
        margin-right: 5px;
    }

    .opUiContainer.md.k-grid td:first-child {
        padding-left: 0;
    }

    .opUiContainer.md.k-grid tr {
        height: 30px;
    }

    .opUiContainer.k-grid .k-grid-header th.k-header a {
        color: #000000;
        font-weight: 400;
    }

    .opUiContainer.k-grid .k-i-expand, .opUiContainer.k-grid .k-i-collapse {
        font-size: 26px;
        color: #0071C5;
    }

    .opUiContainer.k-grid .k-grid-header th.k-header {
        color: #000000;
        font-weight: 400;
        background: #fdfdfd; /* Old browsers */
        background: -moz-linear-gradient(top, #fdfdfd 0%, #d9d9d9 100%); /* FF3.6-15 */
        background: -webkit-linear-gradient(top, #fdfdfd 0%,#d9d9d9 100%); /* Chrome10-25,Safari5.1-6 */
        background: linear-gradient(to bottom, #fdfdfd 0%,#d9d9d9 100%); /* W3C, IE10+, FF16+, Chrome26+, Opera12+, Safari7+ */
        filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#fdfdfd', endColorstr='#d9d9d9',GradientType=0 ); /* IE6-9 */
    }

    .opUiContainer.k-grid .k-pager-wrap, .opUiContainer.k-grid .k-pager-numbers .k-state-selected {
        background-color: #ffffff;
    }

    .opUiContainer.k-grid .k-alt {
        background-color: #ffffff;
    }

    .k-dialog .k-dialog-title, .k-dialog .k-window-title {
        display: none !important;
    }

    .k-dialog .k-content {
        margin-top: -30px;
    }

    .psCheck {
    }

    #sum-container .k-textbox.k-space-left {
        padding-left: 2.1em;
    }

    .chevron {
        color: #00AEEF;
        font-size: 25px;
    }

    table td {
        border: 0px solid #ccc;
    }

    .tbl-header {
        margin-top: 10px;
        font-size: 13px;
    }

    .k-tabstrip-wrapper {
        border-bottom: 0 solid #eeeeee;
    }

    .sum-main-body {
        margin: 5px 10px;
        padding: 0 10px;
    }

    .sum-main-container {
        height: 100%;
        overflow: auto;
    }

    .dropdown-menu label {
        font-weight: 400;
        margin-top: 0;
        margin-bottom: 0;
    }

    .sum-filter-bar {
        border: 0 solid #e4e4e4;
        border-left: 1px solid #e4e4e4;
        border-right: 1px solid #e4e4e4;
        background-color: #eeeeee;
        height: 50px;
        padding: 5px 2px;
        font-size: 14px;
        font-family: "Intel Clear";
        background: #fdfdfd; /* Old browsers */
        background: -moz-linear-gradient(top, #fdfdfd 0%, #d9d9d9 100%); /* FF3.6-15 */
        background: -webkit-linear-gradient(top, #fdfdfd 0%,#d9d9d9 100%); /* Chrome10-25,Safari5.1-6 */
        background: linear-gradient(to bottom, #fdfdfd 0%,#d9d9d9 100%); /* W3C, IE10+, FF16+, Chrome26+, Opera12+, Safari7+ */
        filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#fdfdfd', endColorstr='#d9d9d9',GradientType=0 ); /* IE6-9 */
    }

    .sum-main-body .tbl-header {
        margin-top: 6px;
    }

    #sum-header hr {
        height: 1px;
        margin: 6px 0;
        color: #e4e4e4;
    }

    .sum-main-body .bold {
        color: #00AEEF;
        font-weight: bold;
        font-size: 14px;
        line-height: 1em;
    }

    .sum-main-body .bolder {
        color: #00AEEF;
        font-weight: bold;
        font-size: 16px;
        line-height: 1em;
    }

    .linkable {
        cursor: pointer;
    }

    .linkable:hover {
        color: #003C71;
    }

    .sum-main-body label {
        margin-bottom: 0;
    }

    .sum-main-body .stage {
        text-align: center;
    }

    .sum-main-body .stage div {
        margin: 0 10px;
        padding: 4px 4px;
    }

    input[type=radio].with-font,
    input[type=checkbox].with-font {
        border: 0;
        clip: rect(0 0 0 0);
        height: 1px;
        margin: -1px;
        overflow: hidden;
        padding: 0;
        position: absolute;
        width: 1px;
    }

    input[type=radio].with-font + label:before,
    input[type=checkbox].with-font + label:before {
        font-family: FontAwesome;
        display: inline-block;
        content: "\f096";
        font-size: 20px;
        letter-spacing: 10px;
        color: #00AEEF;
        margin-left: 10px;
    }

    input[type=radio].with-font:hover + label:before,
    input[type=checkbox].with-font:hover + label:before {
        color: #003C71;
        cursor: pointer;
    }

    input[type=radio].with-font.disabled + label:before,
    input[type=checkbox].with-font.disabled + label:before {
        color: #cccccc;
        cursor: default;
    }

    input[type=radio].with-font:checked + label:before,
    input[type=checkbox].with-font:checked + label:before {
        content: "\f046";
        font-size: 20px;
        letter-spacing: 5px;
        color: #C4D600;
        margin-left: 10px;
    }

    input[type=radio].with-font:focus + label:before,
    input[type=checkbox].with-font:focus + label:before {
        font-weight: bold;
        color: #C4D600;
    }

    .bigIcon {
        font-size: 26px;
    }

    .medIcon {
        font-size: 18px;
    }

    .filterUsed {
        color: #003C71;
    }







    .gradTab.k-tabstrip {
        background: #ffffff; /* Old browsers */
        border-bottom: 0 solid transparent;
        height: 37px;
        font-size: 14px;
        font-family: "Intel Clear";
    }

    .gradTab .k-tabstrip-items .k-item {
        background: #fdfdfd; /* Old browsers */
        border: 0 solid transparent;
    }

    .gradTab .k-tabstrip-items {
        border-color: transparent;
        border-width: 1px;
        border-left-width: 1px;
        border-top-width: 1px;
        border-right-width: 1px;
        border-bottom-width: 0;
        border-radius: 4px 4px 0 0;
    }

    .gradTab .k-tabstrip-items .k-state-active {
        background-color: #fff;
        border-color: #b1babf;
        border-width: 1px;
        border-left-width: 1px;
        border-top-width: 1px;
        border-right-width: 1px;
        border-bottom-width: 0;
        border-radius: 4px 4px 0 0;
    }

    .gradTab .k-tabstrip-top > .k-tabstrip-items > .k-item {
        border-bottom-width: 0;
        border: 0 solid transparent;
    }

    .gradTab.k-tabstrip .k-tabstrip-items .k-link {
        background: #fdfdfd; /* Old browsers */
        background: -moz-linear-gradient(top, #fdfdfd 0%, #d9d9d9 100%); /* FF3.6-15 */
        background: -webkit-linear-gradient(top, #fdfdfd 0%,#d9d9d9 100%); /* Chrome10-25,Safari5.1-6 */
        background: linear-gradient(to bottom, #fdfdfd 0%,#d9d9d9 100%); /* W3C, IE10+, FF16+, Chrome26+, Opera12+, Safari7+ */
        filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#fdfdfd', endColorstr='#d9d9d9',GradientType=0 ); /* IE6-9 */
        color: #003C71;
        padding: 0.6em !important;
        text-transform: none !important;
        background-color: #fff;
        border-bottom-width: 0;
    }

    .gradTab.k-tabstrip .k-tabstrip-items .k-state-active .k-link {
        color: #00AEEF;
        background-color: #ffffff;
        background: #ffffff; /* Old browsers */
        background: -moz-linear-gradient(top, #ffffff 0%, #ffffff 100%); /* FF3.6-15 */
        background: -webkit-linear-gradient(top, #ffffff 0%,#ffffff 100%); /* Chrome10-25,Safari5.1-6 */
        background: linear-gradient(to bottom, #ffffff 0%,#ffffff 100%); /* W3C, IE10+, FF16+, Chrome26+, Opera12+, Safari7+ */
        filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#ffffff', endColorstr='#ffffff',GradientType=0 ); /* IE6-9 */
    }

    .gradTab.k-tabstrip .k-tabstrip-items .k-state-hover .k-link {
        background: #d9d9d9; /* Old browsers */
        background: -moz-linear-gradient(top, #d9d9d9 0%, #fdfdfd 100%); /* FF3.6-15 */
        background: -webkit-linear-gradient(top, #d9d9d9 0%,#fdfdfd 100%); /* Chrome10-25,Safari5.1-6 */
        background: linear-gradient(to bottom, #d9d9d9 0%,#fdfdfd 100%); /* W3C, IE10+, FF16+, Chrome26+, Opera12+, Safari7+ */
        filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#d9d9d9', endColorstr='#fdfdfd',GradientType=0 ); /* IE6-9 */
        color: #003C71;
    }

    .gradTab.k-tabstrip .k-tabstrip-items {
        padding: 2px 10px;
    }

    .gradTab.k-tabstrip:focus {
        box-shadow: none !important;
    }

    .gradTab.k-tabstrip ul li.k-item .k-link {
        width: 80px;
        text-align: center;
    }


    .gradTab i:first-child {
        font-size: 16px;
        cursor: pointer;
        color: #00AEEF;
        padding: 3px;
        border-radius: 50%;
        background-color: transparent;
        margin-left: 4px;
    }

    .gradTab i:first-child:hover {
        color: #FFFFFF;
        background-color: #00AEEF;
    }

    .gradTab i.active {
        color: #FFFFFF;
        background-color: #003C71;
    }

    .gradTab i.closeGrp {
        font-size: 16px;
        color: #00AEEF;
        margin-left: 6px;
        margin-right: 4px;
    }

    .gradTab i.closeGrp:hover {
        color: #FC4C02;
    }

    .gradTab .badge {
        vertical-align: top;
    }

    .gradTab .badge.error {
        background-color: #FC4C02;
    }

    .toolbar .btn {
        border: 1px solid transparent;
        color: #00AEEF;
        background-color: transparent;
    }
    .toolbar .btn:hover {
        background-color: #eeeeee;
    }

    .toolbar .btn-default.disabled {
        background-color: transparent !important;
        color: #dddddd !important;
    }

    .toolbar .btn-skyblue {
        background-color: #00AEEF;
        border: 1px solid  #00AEEF;
        color: #ffffff;
        border-radius: 4px;
    }
    .toolbar .btn-skyblue:hover {
        background-color: #0071C5;
        border: 1px solid  #0071C5;
        color: #ffffff;
    }
    .toolbar .btn-skyblue i {
        font-size: 20px;
        margin-right: 6px;
    }
    .btn-skyblue {
        background-color: #00AEEF;
        border: 1px solid  #00AEEF;
        color: #ffffff;
        border-radius: 4px;
    }

    .bold.linkable:hover, .bolder.linkable:hover {
        background-color: #eeeeee;
        line-height: 1.6em;
    }

    .pctSelect {
        width: 100%;
        border: 1px solid #c4cfd4;
        border-radius: 4px;
    }
    .pctSelect .k-i-arrow-60-down {
        color: #00AEEF !important;
        opacity: .9;
    }

    .lnkBasic {
        cursor: pointer;
        text-decoration: underline;
        color: #00AEEF;
    }
    .lnkBasic:hover {
        color: #0071C5;
    }
    .lnkGroup {
        cursor: pointer;
        text-decoration: underline;
        color: #FFA300;
    }
    .lnkGroup:hover {
        color: #0071C5;
    }

    .k-list-scroller {
        overflow: hidden;
    }
    .boxSave {
        background-color: #C4D600;
        font-size: 10px;
        border-radius: 4px;
        padding: 0 3px;
        color: #ffffff;
        vertical-align: top;
        float: right;
        margin: 6px 4px;
    }
    .showReason {
        opacity: 1;
        transition: visible 0s, opacity 1s linear;
    }
    .hideReason {
        opacity: 0;
        transition: hidden 0s, opacity 1s linear;
    }
    .org {
        color: #FFA300 !important;
    }
    .grn {
        color: #C4D600;
    }
    .cell-warning {
        background-color: #f9e9a5;
    }
    .cell-error {
        background-color: #f4949d;
        color: #ffffff !important;
    }
    .btn-skyblue-sm {
        background-color: #00AEEF;
        border: 1px solid  #00AEEF;
        color: #ffffff;
        border-radius: 4px;
        padding: 2px !important;
    }
    .btn-skyblue-sm:hover {
        background-color: #0071C5;
        border: 1px solid  #0071C5;
        color: #ffffff;
    }
    .btn-skyblue-sm i {
        font-size: 20px;
        margin: 0;
        padding: 0;
    }
</style>