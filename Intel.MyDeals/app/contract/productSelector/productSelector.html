<div class="modal-content" moveablemodal style="height:85vh;background-color:#1a3e6f;overflow-y:auto;overflow-x:hidden;border-left:none;border-right:none;">
    <div class="prodSelector modal-header">
        <div class="row">
            <div class="col-md-3">
                <p class="prodHeader cursorArea">Product Selector</p>
            </div>
            <div class="col-md-1" style="padding-top:15px;">
                <img ng-if="loading" src="/Images/loadingSmall.gif" />
            </div>
            <div class="col-md-5 prodSelectorSearch">
                <input id="productSearch" class="prod-autocomplete form-control fl input-sm opUiElement" ng-model="vm.userInput" ng-keyup="$event.keyCode == 13 ? vm.searchProduct() : null" type="text" kendo-autocomplete k-options="vm.productOptions"
                       k-data-value-field="'PRD_MBR_SID'" />
                <div class="err-Search" ng-if="vm.errorMessage.length > 0">
                    {{vm.errorMessage}}
                </div>
            </div>
            <div class="col-md-2" style="padding-left:0px;padding-top:8px">
                <button class="btn btn-primary prdBtn" ng-click="vm.searchProduct()">Search</button>
                <button class="btn btn-default prdBtn" ng-click="vm.clearSearch()" style="margin-left:2px;">Clear</button>
            </div>
            <span class="modalCloseIcon">
                <i role="button" title="Close" class="intelicon-close-max" ng-click="vm.cancel()"></i>
            </span>
        </div>
        <div class="row breadCrumbWrapper">
            <ul class="productpath breadcrumb">
                <li><a role="button" class="prdAnchor" ng-click="vm.selectPath(0)">Select</a></li>
                <li ng-repeat="p in vm.selectedPathParts | unique:'name'" ng-if="p.name != 'NA'">
                    <a role="button" class="prdAnchor" ng-click="vm.selectPath($index + 1)">{{:: p.name }}</a>
                </li>
            </ul>
        </div>
    </div>
    <div class="prodSelector modal-body">
        <div ng-if="!vm.hideSelection" ng-switch="vm.getDisplayTemplate()">
            <div ng-switch-when="btnGroup" class="row" style="padding-left:10px;padding-right:10px;font-size:16px;">
                <div class="drillDown btn-group btn-group-justified" role="group" aria-label="...">
                    <div class="btn-group" ng-repeat="p in vm.items | orderBy:'name'" role="group">
                        <button ng-if="!(vm.selectedPathParts.length < 2)" title="{{p.name}}" type="button" ng-class="{'noborder':$last}" ng-click="vm.selectItem(p)" class="btn btn-default">
                            {{::vm.checkForBlank(p.name)}}
                        </button>
                        <button popover-class="selector popover" ng-if="vm.selectedPathParts.length < 2" popover-title="Product Categories" uib-popover="{{::vm.getVerticalsUnderMarkLevel(p.name)}}"
                                popover-trigger="'mouseenter'" popover-placement="bottom"
                                popover-append-to-body="true" type="button" ng-class="{'noborder':$last}" ng-click="vm.selectItem(p)" class="btn btn-default">
                            {{::vm.checkForBlank(p.name)}}
                        </button>
                    </div>
                </div>
            </div>
            <div ng-switch-when="btnGrid" class="row" style="margin:2px;">
                <div ng-repeat="p in vm.items | orderBy:'name'">
                    <div class="clearfix" ng-if="$index % 4 == 0"></div>
                    <div class="col-sm-3 prodDrillDownLarge" title="{{::vm.checkForBlank(p.name)}}" ng-class="{'noLeftBorder':$index % 4 == 0}">
                        <p role="button"  ng-click="vm.selectItem(p)">{{::vm.checkForBlank(p.name)}}</p>
                    </div>
                </div>
            </div>
            <div ng-switch-default="ng-switch-default">
                <div id="prodGrid" kendo-grid="prodGrid" kendo-grid-check-box k-grid-checkbox="vm" class="prodSelector opUiContainer md prodSelector-grid k-grid kendoGridHeight" k-options="vm.gridOptionsProduct"></div>
            </div>
        </div>
        <div ng-if="vm.hideSelection">
            <div class="row" ng-if="vm.searchItems.length > 0" style="padding-left:10px;padding-right:10px;font-size:16px;">
                <div class="drillDown btn-group btn-group-justified" role="group" aria-label="...">
                    <div class="btn-group" ng-repeat="p in vm.searchItems | orderBy:'name' " role="group">
                        <button type="button" ng-class="{'noborder':$last}" ng-click="vm.selectsearchItem(p)" class="btn btn-default">{{::p.name}}</button>
                    </div>
                </div>
            </div>
            <div ng-if="vm.showSearchResults">
                <div id="prodGrid" kendo-grid="prodGrid" kendo-grid-check-box k-grid-checkbox="vm" class="prodSelector opUiContainer md prodSelector-grid k-grid kendoGridHeight" k-options="vm.gridOptionsProduct"></div>
            </div>
        </div>
    </div>
    <div class="prodSelector modal-footer">
        <div class="row">
            <div class="col-md-6 text-left textProdSelector">
                <p>Selected Products<small>&nbsp;({{vm.addedProducts.length}})</small></p>
            </div>
            <div class="col-md-6">
                <button class="btn btn-default prdBtn" ng-click="vm.clearProducts()" style="margin-left:2px;">Clear all products</button>
                <button class="btn btn-primary fr prdBtn" ng-click="vm.addProducts()">Add Product(s)</button>
            </div>
        </div>
        <div class="row" style="padding-left:15px;padding-right:15px;">
            <ui-select allow-clear="true" onkeypress="return false;" class="prodSelected text-left"
                       tagging="true" multiple ng-model="vm.addedProducts" theme="bootstrap">
                <ui-select-match><span ng-click="vm.showSingleProductHeirarchy($item)" kendo-tooltip k-content='$item.HIER_NM_HASH'>{{$item.HIER_VAL_NM}}</span></ui-select-match>
                <ui-select-choices repeat="products in vm.selectedProducts">
                </ui-select-choices>
            </ui-select>
        </div>
        <br />
        <div class="form-inline insertAtRowsText">
            <span ng-if="vm.enableSplitProducts">
                <input id="separateProduct" class="checkbox-custom" ng-model="vm.splitProducts" name="separateroducts" type="checkbox">
                <label for="separateProduct" class="checkbox-custom-label" style="padding-bottom:5px;margin-top:0px;">&nbsp;Separate product in rows</label>
            </span>
            <button class="btn btn-primary fr prdBtn" ng-click="vm.save()">Save</button>
            <button class="btn btn-default fr prdBtn" ng-click="vm.cancel()" style="margin-right:4px;">Cancel</button>
        </div>
    </div>
</div>
<style>
    .marginRight {
        margin-right: 10px;
    }

    .prodSelectorSearch {
        padding-top: 9px;
        overflow: hidden;
    }

        .prodSelectorSearch .prod-autocomplete {
            padding-top: 0px;
            padding-bottom: 0px;
        }

    .textProdSelector {
        font-size: 19px;
        color: white;
    }

    .insertAtRowsText {
        color: white;
        font-size: 16px;
        text-align: right;
    }

    .prodHeader {
        color: white;
        font-size: 32px;
    }

    .breadCrumbWrapper {
        padding-left: 10px;
        padding-right: 10px;
        font-size: 21px;
    }

    .modalCloseIcon {
        color: white;
        font-size: 32px;
        padding-top: 12px;
        padding-left: 20px;
    }

    .productpath.breadcrumb > li + li:before {
        padding: 0 5px;
        color: white;
        content: ">";
        font-size: 16px;
    }

    .productpath.breadcrumb {
        color: white;
        background-color: #1a3e6f;
        padding: 10px;
        margin-bottom: 0px;
    }

    a.prdAnchor {
        color: white;
    }

        a.prdAnchor:hover {
            color: #01AEEF;
            text-decoration: none;
        }

    .drillDown.btn-group button {
        background-color: #01AEEF;
        border-left: none;
        border-top: none;
        border-bottom: none;
        border-right: 1px solid white;
        color: white; /* White text */
        cursor: pointer; /* Pointer/hand icon */
        float: left; /* Float the buttons side by side */
        text-overflow: ellipsis;
        overflow: hidden;
    }

    .drillDown {
        background-color: #01AEEF;
    }

        .drillDown.btn-group {
            padding-top: 3px;
            padding-bottom: 3px;
        }

            .drillDown.btn-group.btn {
                white-space: normal !important;
                word-wrap: break-word;
            }

            .drillDown.btn-group button:not(:last-child) {
                border-right: none; /* Prevent double borders */
            }

            .drillDown.btn-group button.noborder {
                border-right: none;
            }

            /* Add a background color on hover */
            .drillDown.btn-group button:hover {
                background-color: #01AEEF;
                color: #1a3e6f;
            }

            .drillDown.btn-group button:focus, .button:active {
                outline: none !important;
                background-color: #01AEEF;
            }

    .noLeftBorder {
        border-left: none !important;
    }

    .prodDrillDownLarge {
        background-color: #01AEEF;
        border-bottom: 2px solid #1a3e6f;
        border-left: 1px solid #ffffff;
        border-right: none;
        border-top: none;
        text-align: center;
    }

        .prodDrillDownLarge p {
            font-size: 13px;
            margin-top: 11px;
            color: #fff;
            text-overflow: ellipsis;
            overflow: hidden;
            white-space:nowrap;
        }

            .prodDrillDownLarge p:hover {
                color: #1a3e6f;
            }

    .prodSelected.ui-select-multiple.ui-select-bootstrap {
        min-height: 100px !important;
        max-height: 100px !important;
        overflow-y: auto;
        overflow-x: hidden;
    }

    .err-Search {
        color: #FF6E77;
        font-size: 12px !important;
        padding-left: 1px !important;
        padding-top: 2px !important;
    }

    .prdBtn {
        font-size: 13px;
    }

        .prdBtn.btn-primary {
            background-color: #01AEEF;
        }

            .prdBtn.btn-primary:hover {
                background-color: #01AEEF;
                color: #1a3e6f;
            }

            .prdBtn.btn-primary:focus, .btn-primary:active {
                outline: none !important;
                background-color: #01AEEF;
            }

    .prodSelector.modal-body {
        padding-top: 2px;
        padding-bottom: 0px;
        min-height: calc(85vh - 370px);
        max-height: calc(85vh - 370px);
        overflow-y: auto;
    }

    .prodSelector.modal-footer {
        border-top: none;
    }

    .prodSelector.modal-header {
        border-bottom: none;
        padding-bottom: 0px;
    }

    .prodSelector.kendoGridHeight {
        height: calc(85vh - 400px);
    }

    .prdSelector-modal-window, .modal-dialog {
        width: 85%;
        margin-left: auto;
        margin-right: auto;
    }

    .checkbox-custom {
        opacity: 0;
        position: absolute;
    }

    .checkbox-custom, .checkbox-custom-label {
        display: inline-block;
        vertical-align: middle;
        margin: 5px;
        cursor: pointer;
    }

    .checkbox-custom-label {
        position: relative;
    }

    .checkbox-custom + .checkbox-custom-label:before {
        content: '';
        background: #fff;
        border: 1.5px solid #eee;
        border-radius: 4px;
        display: inline-block;
        vertical-align: middle;
        width: 22px;
        height: 20px;
        padding: 2px;
        text-align: center;
    }

    .checkbox-custom:checked + .checkbox-custom-label:before {
        background: #01AEEF;
    }

    .checkbox-custom:hover + .checkbox-custom-label:before {
        border: 1.5px solid #01AEEF;
    }

    .prodSelector-grid.k-grid td {
        white-space: nowrap;
        color: #000000;
    }

    .prodSelector-grid.k-grid tr.k-alt {
        background-color: transparent;
    }

    .prodSelector-grid.k-grid .k-grid-header th.k-header {
        vertical-align: middle;
    }

    .productSelector.searchTemplate {
        border-bottom: 1px solid #ddd;
    }
    .selector.popover{
        font-size:12px;
    }

</style>
