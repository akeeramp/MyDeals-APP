<div ng-include="'/app/core/directives/gridCell/dealToolsHelper.html'"></div>
<div ng-include="'app/contract/partials/ptModals/datePickerModal.html'"></div>
<div ng-include="'app/contract/partials/ptModals/multiSelectModal.html'"></div>
<div ng-include="'app/contract/partials/ptModals/dropdownModal.html'"></div>
<div ng-include="'app/contract/partials/ptModals/emailModal.html'"></div>
<!--<div ng-include="'app/contract/partials/ptModals/ecapTrackerModal.html'"></div>-->
<!--<div ng-include="'app/contract/partials/ptModals/ecapTrackerAutoFillModal.html'"></div>-->

<loading-panel show="isBusy" header="isBusyMsgTitle" description="isBusyMsgDetail" msg-type="isBusyType" ng-show="isBusy" is-show-fun-fact="isBusyShowFunFact"></loading-panel>

<div class="show-hide-options">
    <span ng-show="showSearchFilters" ng-click="toggleFilters()">
        <i class="intelicon-up"></i> Hide Tender Search Options
    </span>
    <span ng-show="!showSearchFilters" ng-click="toggleFilters()">
        <i class="intelicon-down"></i> Show Tender Search Options
    </span>
</div>

<div id="horizontal-search">
    <div id="search-info-container" ng-show="showSearchFilters">

        <div class="row search-container">
            <div class="col-md-5 left-inner-container">
                <h5>Tender Dashboard Search</h5>
                <p>
                    <i>Default filter is auto populated from the dashboard but you may overwrite at anytime. This will not change your dashboard filters.</i>
                </p>

                <div style="margin-bottom: 20px;" class="fl">
                    <table>
                        <tr>
                            <td style="width: 130px;">
                                <label title="{{showCustomers()}}">Customers: <i class="intelicon-find-a-person-solid" style="font-size: 20px;"></i></label>
                            </td>
                            <td>
                                <select kendo-multi-select
                                        k-data-text-field="'CUST_NM'"
                                        k-data-value-field="'CUST_NM'"
                                        k-filter="'contains'"
                                        k-auto-bind="true"
                                        k-tag-mode="'single'"
                                        k-value-primitive="true"
                                        k-ng-model="customers"
                                        k-auto-close="false"
                                        k-data-source="customersDataSource"
                                        style="width: 250px; margin-right: 7px;"></select>
                            </td>
                        </tr>
                    </table>


                </div>

                <div class="fl">
                    <label>Date Range:</label>
                    <input kendo-date-picker
                           ng-model="startDt"
                           ng-change="changeDt(startDate,endDate)"
                           k-ng-model="startDtObject"
                           style="width: 110px;" />
                    <span style="margin: 0 10px;">to</span>
                    <input kendo-date-picker
                           ng-model="endDt"
                           ng-change="changeDt(startDate,endDate)"
                           k-ng-model="endDtObject"
                           style="width: 110px;" />
                </div>

                <div class="clearboth"></div>
            </div>
            <div class="col-md-7 right-inner-container">
                <div attribute-builder
                     grid-id="'attributeGrid'"
                     operator-settings="operatorSettings"
                     attribute-settings="attributeSettings"
                     custom-settings="customSettings"
                     run-search="runSearch"></div>
            </div>
        </div>

    </div>

    <div op-grid
         ng-if="wipData.length != 0"
         style="height: 100%;"
         op-data="wipData"
         op-options="wipOptions"
         op-is-tender=true
         op-help="helpTopic">
    </div>
</div>



<style class="ng-scope">
    #notesDialog {
        width: 100%;
        height: 100%;
        padding: 0;
    }

        #notesDialog div {
            padding: 0 8px;
        }

            #notesDialog div textarea {
                width: 440px;
                height: 200px;
            }

    .k-dialog .notesDialog.k-content textarea {
        width: 450px;
        height: 250px;
    }

    .k-dialog .notesDialog.k-content .opUiContainer {
        margin-top: -30px;
    }

    .k-dialog .promptUserDialog {
        text-align: center;
        padding: 10px 0 0 0;
    }

        .k-dialog .promptUserDialog h4 {
            color: #003C71;
            font-size: 18px;
            font-weight: 600;
            margin-top: 0;
        }

        .k-dialog .promptUserDialog p {
            font-size: 12px;
            padding: 10px 20px;
        }

    .rotate90 {
        -ms-transform: rotate(90deg);
        -webkit-transform: rotate(90deg);
        transform: rotate(90deg);
    }

    .dirtyTip {
        position: absolute;
        left: 0;
        border-style: solid;
        border-color: #0071C5 transparent transparent #0071C5;
        border-width: 3px;
    }

    .dealTools {
        line-height: 1.8em;
        height: 100% !important;
        width: 100%;
    }

        .dealTools .gridStatusMarker {
            font-family: arial;
        }

        .dealTools a {
            text-decoration: none;
        }

        .dealTools i:hover {
            color: #003C71;
        }

    .gridStatusMarker {
        height: 100%;
        width: 16px;
        color: #000000;
        background-color: #cccccc;
        font-size: 14px;
        font-weight: 600;
        padding: 6px 2px 6px 7px;
        text-align: center;
    }

        .gridStatusMarker.Working {
            color: #000000;
            background-color: #FFA300;
        }

        .gridStatusMarker.Active {
            color: #000000;
            background-color: #C4D600;
        }

        .gridStatusMarker.Cancelled {
            color: #000000;
            background-color: #cccccc;
        }

    .dealTools .md-icon {
        padding: 4px 0 0 5px;
    }

        .dealTools .md-icon i {
            color: #00AEEF;
        }

            .dealTools .md-icon i:hover {
                color: #003C71 !important;
            }

    .dealTools .md-icon-disabled {
        padding: 4px 2px 0 1px;
    }

        .dealTools .md-icon-disabled i {
            color: #00AEEF;
        }

    .dealTools input[type=radio].with-font,
    .dealTools input[type=checkbox].with-font {
        border: 0;
        clip: rect(0 0 0 0);
        height: 1px;
        margin: -1px;
        overflow: hidden;
        padding: 0;
        position: absolute;
        width: 1px;
    }

        .dealTools input[type=radio].with-font + label:before,
        .dealTools input[type=checkbox].with-font + label:before {
            font-family: FontAwesome;
            display: inline-block;
            content: "\f096";
            font-size: 20px;
            letter-spacing: 10px;
            color: #00AEEF;
            margin-left: 10px;
        }

        .dealTools input[type=radio].with-font:hover + label:before,
        .dealTools input[type=checkbox].with-font:hover + label:before {
            color: #003C71;
            cursor: pointer;
        }

        .dealTools input[type=radio].with-font.disabled + label:before,
        .dealTools input[type=checkbox].with-font.disabled + label:before {
            color: #cccccc;
            cursor: default;
        }

        .dealTools input[type=radio].with-font:checked + label:before,
        .dealTools input[type=checkbox].with-font:checked + label:before {
            content: "\f046";
            font-size: 20px;
            letter-spacing: 5px;
            color: #C4D600;
            margin-left: 10px;
        }

        .dealTools input[type=radio].with-font:focus + label:before,
        .dealTools input[type=checkbox].with-font:focus + label:before {
            font-weight: bold;
            color: #00AEEF;
        }

        .dealTools input[type=radio].with-font:checked:focus + label:before,
        .dealTools input[type=checkbox].with-font:checked:focus + label:before {
            font-weight: bold;
            color: #C4D600;
        }

    .delete-attach-icon {
        font-size: 16px;
        cursor: pointer;
    }

        .delete-attach-icon:hover {
            text-decoration: none;
        }

    .disabled-dropdown .k-dropdown .k-state-disabled .k-input,
    .disabled-dropdown .k-dropdown .k-state-disabled .k-select,
    .disabled-dropdown .k-dropdown .k-state-disabled .k-select .k-icon {
        cursor: not-allowed;
    }

    #horizontal-search {
        border: 0 solid transparent;
        height: 100%;
        font-size: 12px;
        margin-left: -8px;
        margin-right: -8px;
    }

    #search-info-container {
        width: 100%;
        margin: auto;
    }

    .search-toolbar {
        padding: 0 15px;
    }

        .search-toolbar h5, #search-info-container h5 {
            margin-top: 0;
            color: #003C71;
            font-weight: 600;
        }

    #search-info-container label {
        font-weight: normal;
        font-size: 16px;
        margin-right: 10px;
        width: 110px;
    }

    #search-info-container .left-container {
        width: 420px;
        float: left;
    }

    #search-info-container .left-inner-container {
        border: 1px solid transparent;
        border-radius: 6px;
        padding: 0 10px 20px 10px;
    }

    #search-info-container .right-container {
        padding: 20px 10px 20px 900px;
        margin-left: -460px;
    }

    #search-info-container .right-inner-container {
        border: 1px solid #e5e5e5;
        border-radius: 6px;
        padding: 10px;
        height: 190px;
    }

    .btn-skyblue {
        background-color: #00AEEF;
        border-color: #00AEEF;
        margin: 0 0 0 15px;
    }

        .btn-skyblue:hover {
            background-color: #0071C5;
        }

    .show-hide-options {
        color: #00AEEF;
        cursor: pointer;
        position: absolute;
        top: 1px;
        right: 20px;
        z-index: 200;
        font-size: 12px;
    }

        .show-hide-options:hover {
            color: #0071C5;
        }

    .attrbMenu .k-link {
        padding: 3px 20px !important;
    }

    .attrbMenu .k-state-hover .k-link {
        background-image: none, linear-gradient(to bottom, #f2f2f2 0px, #f2f2f2 100%) !important;
    }

    .k-multiselect {
        width: 360px;
    }

    .objDealId {
        cursor: pointer;
        color: #00AEEF;
    }

        .objDealId:hover {
            color: #003C71;
        }

    .search-container {
        padding: 25px 20px;
    }

    .valid_Valid {
        background: #e8eaec;
    }

    .valid_Finalizing {
        background: #e8eaec;
    }

    .valid_Complete {
        background: #C4D600;
    }

    .valid_, .valid_0, .valid_Dirty {
        background: #e8eaec;
    }

    .validf_Valid {
        color: #e8eaec;
    }

    .validf_Finalizing {
        color: #e8eaec;
    }

    .validf_Complete {
        color: #C4D600;
    }

    .validf_, .validf_0, .validf_Dirty {
        color: #f9521a;
    }
</style>
<script id="emailItemTemplateTender" type="text/x-kendo-template">

    <div style='font-family:sans-serif;'>
        <p><span style='font-size:20px; color: \\#00AEEF; font-weight: 600'>My Deals Action Required!</span></p>
        <p><span style='font-size: 14px; color: red;'><i>**This email was sent from a notification-only address that cannot accept incoming email.  Please do not reply to this message.</i></span></p>
        <p><span style='font-size: 14px;'><b>Please respond to: </b> <a href='mailto:#= data.from #'>#= data.from #</a>.</span></p>
        <br />
        <p><span style='font-size:18px;'>Pricing Strategies</span></p>
        <p><span style='font-size: 12px;'>The following list of Pricing Strategies have changed.  Click <b style='color: \\#00AEEF;'>View Pricing Strategy</b> in order to view details in My Deals.</span></p>
        <table>
            <thead>
                <tr>
                    <th style='text-align: left; width:200px; font-size: 12px; font-family: sans-serif;'><strong>Tender Folio</strong></th>
                    <th style='text-align: left; width:100px; font-size: 12px; font-family: sans-serif;'><strong>Strategy \\#</strong></th>
                    <th style='text-align: left; width:160px; font-size: 12px; font-family: sans-serif;'><strong>End Customer</strong></th>
                    <th style='text-align: left; width:100px; font-size: 12px; font-family: sans-serif;'><strong>Verticals</strong></th>
                    <th style='text-align: left; width:200px; font-size: 12px; font-family: sans-serif;'><strong>Stage</strong></th>
                    <th style='text-align: left; width:200px; font-size: 12px; font-family: sans-serif;'><strong>Action</strong></th>
                </tr>
            </thead>
            <tbody>
                # for (var i = 0; i < data.items.length; i++) { #
                <tr>
                    <td style='width:100px; font-size: 12px; font-family: sans-serif;'><span style=''>#= data.items[i].CNTRCT #</span> </td>
                    <td style='width:100px; font-size: 12px; font-family: sans-serif;'><span style='color:\\#1f4e79;'><a href='#= data.items[i].url #'>#= data.items[i].DC_ID #</a>*</span> </td>
                    <td style='width:160px; font-size: 12px; font-family: sans-serif;'><span style=''>#= data.items[i].END_CUSTOMER_RETAIL #</span> </td>
                    <td style='width:100px; font-size: 12px; font-family: sans-serif;'><span style='color:\\#1f4e79;'>#= data.items[i].VERTICAL_ROLLUP #</span> </td>
                    <td style='width:200px; font-size: 12px; font-family: sans-serif;'><span style='color:\\#767171;'>#= data.items[i].NEW_STG # </span> </td>
                    <td style='width:200px; font-size: 12px; font-family: sans-serif;'><span style='color:\\#1f4e79;'><a href='#= data.items[i].url #'>View Pricing Strategy</a>*</span> </td>
                </tr>
                # } #
            </tbody>
        </table>
        <br />
        <p><span style='font-size: 11px; color: black; font-weight: bold;'>*Links are optimized for Google Chrome</span></p>
    </div>

</script>