<div class="alert alert-info alert-group">
    <div class="form-inline">
        <select ng-options="o.name as o.name for o in operators" ng-model="group.operator" class="form-control input-sm"></select>
        <button ng-click="addCondition()" class="qb-field btn btn-sm btn-success"><span class="glyphicon glyphicon-plus-sign"></span> Add Condition</button>
        <button ng-click="addGroup()" class="qb-field btn btn-sm btn-success"><span class="glyphicon glyphicon-plus-sign"></span> Add Group</button>
        <button ng-click="removeGroup()" class="qb-field btn btn-sm btn-danger"><span class="glyphicon glyphicon-minus-sign"></span> Remove Group</button>
    </div>
    <div class="group-conditions">
        <div ng-repeat="rule in group.rules | orderBy:'index'" class="condition">
            <div ng-switch="rule.hasOwnProperty('group')">
                <div ng-switch-when="true">
                    <query-builder group="rule.group" operators="vm.operators" lefttypes="vm.lefttypes" leftvalues="vm.leftvalues" conditions="vm.conditions" righttypes="vm.righttypes" rightvalues="vm.rightvalues">
                    </query-builder>
                </div>
                <div ng-switch-default="ng-switch-default">
                    <div class="form-inline">
                        <ui-select ng-model="rule.lefttype" theme="select2" class="qb-field-core" ng-disabled="vm.disabled" title="Choose a type">
                            <ui-select-match placeholder="Select a Type..">{{$select.selected.name}}</ui-select-match>
                            <ui-select-choices repeat="t.name as t in lefttypes | filter: $select.search">
                                <div ng-bind-html="t.name | highlight: $select.search"></div>
                            </ui-select-choices>
                        </ui-select>

                        <span ng-switch="getEditorType(rule.lefttype, 'left')">
                            <span ng-switch-when="textbox">
                                <input type="text" ng-model="rule.leftvalue" class="qb-field-core form-control input-sm" />
                            </span>
                            <span ng-switch-when="dropdown">
                                <ui-select ng-model="rule.leftvalue" theme="select2" class="qb-field-core" ng-disabled="vm.disabled" title="Choose a value">
                                    <ui-select-match placeholder="Select a Value..">{{$select.selected.name}}</ui-select-match>
                                    <ui-select-choices repeat="t.name as t in leftvalues | filter: $select.search">
                                        <span ng-bind-html="t.name | highlight: $select.search"></span>
                                    </ui-select-choices>
                                </ui-select>
                            </span>
                            <span ng-switch-when="disabled">
                                <input disabled type="text" class="qb-field-core form-control input-sm" />
                            </span>
                        </span>
                        

                        <select ng-options="c.name as c.name for c in conditions" ng-model="rule.condition" class="qb-field form-control input-sm"></select>

                        <ui-select ng-model="rule.righttype" theme="select2" class="qb-field-core" ng-disabled="vm.disabled" title="Choose a type">
                            <ui-select-match placeholder="Select a Type..">{{$select.selected.name}}</ui-select-match>
                            <ui-select-choices repeat="t.name as t in righttypes | filter: $select.search">
                                <div ng-bind-html="t.name | highlight: $select.search"></div>
                            </ui-select-choices>
                        </ui-select>

                        <span ng-switch="getEditorType(rule.righttype, 'right')">
                            <span ng-switch-when="textbox">
                                <input type="text" ng-model="rule.rightvalue" class="qb-field-core form-control input-sm" />
                            </span>
                            <span ng-switch-when="dropdown">
                                <ui-select ng-model="rule.rightvalue" theme="select2" class="qb-field-core" ng-disabled="vm.disabled" title="Choose a value">
                                    <ui-select-match placeholder="Select a Value..">{{$select.selected.name}}</ui-select-match>
                                    <ui-select-choices repeat="t.name as t in rightvalues | filter: $select.search">
                                        <span ng-bind-html="t.name | highlight: $select.search"></span>
                                    </ui-select-choices>
                                </ui-select>
                            </span>
                            <span ng-switch-when="disabled">
                                <input disabled type="text" class="qb-field-core form-control input-sm" />
                            </span>
                        </span>

                        <button ng-click="removeCondition($index)" class="qb-field btn btn-sm btn-danger"><span class="glyphicon glyphicon-minus-sign"></span></button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>