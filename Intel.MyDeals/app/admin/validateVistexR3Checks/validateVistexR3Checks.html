<div class="contract-detail-form" style="overflow:auto">
    <div>
        <h2>Validate Deals for Vistex Push</h2>
        <p style="color: #FC4C02">Validate existing deals against Vistex R3 requirements prior to pushing them to the Vistex system.</p>
    </div>
    <div class="row">
        <div class="col-md-5">

            <div op-control-flat
                    ng-model="SelectedCustId"
                    op-cd="'ATRB_SID'"
                    op-type="'DROPDOWN'"
                    op-label="'Customer :'"
                    op-lookup-url="'/api/Customers/GetActiveCustomers'"
                    op-lookup-text="'CUST_NM'"
                    op-lookup-value="'CUST_NM'"
                    op-selected-object="'AtrbSid'"
                    op-is-stealth="true"
                    op-is-form="true"
                    op-class="'local-Padding'"
                    op-ui-mode="'HORIZONTAL'">
            </div>

            <div op-control-flat
                    ng-model="DealstoSend"
                    ng-pattern="vm.RegxDealIds"
                    op-cd="'DEAL_IDS'"
                    op-type="'TEXTAREA'"
                    op-label="'Deal Id(s) :'"
                    op-is-form="true"
                    op-placeholder="'Multiple deal IDs can be separated with comma.'"
                    op-class="'local-Padding'"
                    op-ui-mode="'HORIZONTAL'">
            </div>
        </div>

        <div class="col-md-5 local-Padding">
            <div class="fl opUiLabel ng-binding" font-weight:bold">Mode to run : </div>
            <div class="col-md-8">
                <select id="comboApiName" class="fl opUiElement"
                        kendo-combo-box
                        k-options="vm.vistexApiNames"
                        k-ng-model="vm.selectedApiID"
                        k-value-primitive="false"
                        style="display: none;">
                </select>
            </div>

            <button ng-click="ValidateForVistexR3()" class="btn btn-primary"> Run Validation </button>
            <span style="margin-left:15px;margin-top:10px;" ng-if="ShowResults == true">
                <a style="text-decoration:underline"><b>Results:</b></a> Deals Sent: {{UpdCnt.sent}}, <i style="color:darkblue;">Errors Returned: {{UpdCnt.returned}}</i>
            </span>

            <div class="col-md-8 local-Padding-Top" ng-if="ShowResults == true && GoodToSendDealIds.length > 0">
                Deals To Send: {{GoodToSendDealIds}}
                <button ng-click="SendDealsToVistex()" class="btn btn-primary" style="background-color: forestgreen;"> Send Good Deals to Vistex </button>
            </div>

        </div>
    </div>

    <div id="OutputHolder" class="col-md-12" style="padding-top: 20px;">
        <div ng-if="ShowResults == true" id="OutputGrid" kendo-grid="DealMassupdateGrid" class="table table-bordered table-striped table-intel" expand-k-grid options="vm.gridOptions">
        </div>
    </div>

    </div>

<script id="grid_toolbar_clearbutton" type="text/x-kendo-template">
    <a role="button" class="k-button k-button-icontext" ng-click="vm.clearFilters()">
        <span class="k-icon intelicon-cancel-filter-solid"></span>Clear Filters</a>
</script>

<script id="grid_toolbar_exportexcel" type="text/x-kendo-template">
    <a role="button" class="k-button k-button-icontext k-grid-add" ng-click="vm.exportToExcel()">
        <span class="intelicon-ms-excel-outlined" style="margin-right:5px"></span>Export Error Deals to Excel</a>
</script>

<style>
    /*TODO: If all pages need this we have to paste it in Global CSS and have to check the effect in all the pages*/
    .local-Padding {
        padding: 5px;
    }
    .local-Padding-Top {
        padding-top: 5px;
        margin-left: -15px;
    }
    .k-grid-content {
        height:370px !important;
    }
    #OutputHolder {
        margin-top: -35px;
    }
/*    #OutputGrid {
        height: 300px !important;
    }*/
</style>
