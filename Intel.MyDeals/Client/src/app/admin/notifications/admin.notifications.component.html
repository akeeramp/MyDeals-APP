﻿<link href="/Client/src/app/admin/kendo_grid.css" rel="stylesheet" />
<div class="row">
    <div class="col-md-12 k-header-alignment padding-top-20">
        <h3>Notifications</h3>
    </div>
</div>
<div class="row">
    <div class="col-md-12 kendo-grid-buttons">
        <kendo-grid class="grid_fix gridCompNotification kAlignHeaders"  [data]="gridData" [loading]="isLoading" [pageSize]="state.take" [skip]="state.skip"
            [sort]="state.sort" [filter]="state.filter" [sortable]="true"
            [pageable]="{type:type,pageSizes: pageSizes,info:info}" [groupable]="false" filterable="menu"
            [resizable]="true" [navigable]="true" (dataStateChange)="dataStateChange($event)"
            (cellClick)="openMessage($event)" [selectable]="{ checkboxOnly: true}" kendoGridSelectBy="NLT_ID"
            [(selectedKeys)]="mySelection">
            <ng-template kendoGridToolbarTemplate><button (click)="markAsRead()"
                    class="k-button k-button-icontext"><span style="display:inline;"><span
                            class="fa fa-eye"></span>&nbsp;MARK AS READ </span></button><button (click)="markAsUnRead()"
                    class="k-button k-button-icontext"><span style="display:inline;"><span
                            class="fa fa-eye-slash"></span>&nbsp;MARK AS UNREAD </span></button><button
                    (click)="delete()" class="k-button k-button-icontext"><span style="display:inline;"><span
                            class="fa fa-trash-o"></span>&nbsp;DELETE</span></button>
                    <input class="input-sm searchNotif" placeholder="SEARCH" style="width:400px;" [(ngModel)]="searchFilter" (keyup)="filterMessages($event)" />
                <kendo-grid-spacer></kendo-grid-spacer><button (click)="clearFilter()"
                    class="k-button clearButton"><span class="intelicon-cancel-filter-solid k-icon-md k-family"></span>CLEAR FILTERS
                </button><button (click)="refreshGrid()" class="k-button clearButton"><span
                        class="k-icon k-i-reload k-icon-md"></span>Refresh </button>
            </ng-template>
            <kendo-grid-checkbox-column field="NLT_ID" width="20" [headerClass]="{'headerClass':true}"
                showSelectAll="true"></kendo-grid-checkbox-column>
            <kendo-grid-column field="NOTIF_NM" title="Notification Type" width="100"
                [headerClass]="{'headerClass':true}">
                <ng-template kendoGridFilterMenuTemplate let-column="column" let-filter="filter"
                    let-filterService="filterService">
                    <multicheck-filter [isPrimitive]="true" [field]="column.field" [currentFilter]="filter"
                        [filterService]="filterService" [data]="distinctPrimitive(column.field)"></multicheck-filter>
                </ng-template>
            </kendo-grid-column>
            <kendo-grid-column field="NOTIF_SHR_DSC" title="Message" width="300" [headerClass]="{'headerClass':true}">
                <ng-template kendoGridCellTemplate let-dataItem>
                    <div kendoTooltip position="bottom">
                        <span [ngClass]="{'unread':!dataItem.IS_READ_IND}" title='Click here to read.'
                              style="cursor:pointer">{{ dataItem.NOTIF_SHR_DSC}} </span>
                    </div>
                </ng-template>
            </kendo-grid-column>
            <kendo-grid-column [headerClass]="{'headerClass':true}" field="CRE_UPDATED_DATE" width="100"
                title="Created Date Time" filter="date" format="{0:M/d/yyyy}" [editable]="false">
                <ng-template kendoGridFilterMenuTemplate let-filter="filter" let-column="column"
                    let-filterService="filterService">
                    <date-range-filter [field]="column.field" [filter]="filter" [filterService]="filterService">
                    </date-range-filter>
                </ng-template>
                <ng-template kendoGridCellTemplate let-dataItem>{{dataItem.CRE_DTM | date: 'M/d/yyyy HH:mm:ss.SSS'}}
                </ng-template>
            </kendo-grid-column>
        </kendo-grid>
    </div>
</div>