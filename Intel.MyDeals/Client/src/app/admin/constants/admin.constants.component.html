﻿<link href="/Client/node_modules/bootstrap/dist/css/bootstrap.min.css" rel="stylesheet" />
<link href="/Client/node_modules/@progress/kendo-theme-bootstrap/dist/all.css" rel="stylesheet" />
<link href="/Client/node_modules/@angular/material/prebuilt-themes/indigo-pink.css" rel="stylesheet" />
<link href="/Client/src/app/admin/kendo_grid.css" rel="stylesheet" />
<div class="row">
    <div class="col-md-12 k-header-alignment">
        <h3>Constants</h3>
    </div>
</div>
<div class="row">
    <div class="col-md-12 kendo-grid-buttons">
        <kendo-grid [data]="gridData" [loading]="isLoading" [pageSize]="state.take" [skip]="state.skip"
            [sort]="state.sort" [filter]="state.filter" [sortable]="true"
            [pageable]="{type:type,pageSizes: pageSizes,info:info}" [groupable]="false" [group]="state.group"
            filterable="menu" [navigable]="true" (dataStateChange)="dataStateChange($event)" (add)="addHandler($event)"
            (edit)="editHandler($event)" (cancel)="cancelHandler($event)" (save)="saveHandler($event)"
            (remove)="removeHandler($event)" [columnMenu]="true">
            <ng-template kendoGridToolbarTemplate><button kendoGridAddCommand class="k-button addButton"><span
                        class="k-icon k-i-plus-outline k-icon-md"></span>ADD NEW RECORD </button><button
                    (click)="clearFilter()" class="k-button clearButton"><span
                        class="k-icon k-i-filter-clear k-icon-md"></span>CLEAR FILTERS </button>
                <kendo-grid-spacer></kendo-grid-spacer><button (click)="refreshGrid()"
                    class="k-button clearButton"><span class="k-icon k-i-reload k-icon-md"></span>Refresh </button>
            </ng-template>
            <kendo-grid-command-column title="" width="60" [headerClass]="{'headerClass':true}" [columnMenu]="false">
                <ng-template kendoGridCellTemplate let-dataItem="dataItem" let-isNew="isNew"><button id="command-icon"
                        kendoGridEditCommand [hidden]="!dataItem.UI_UPD_FLG"><span
                            class="k-icon k-i-edit k-icon-sm"></span></button><button kendoGridRemoveCommand
                        id="command-icon" *ngIf="!opened" [hidden]="!dataItem.UI_UPD_FLG" class="k-button"><span
                            class="k-icon k-i-delete k-icon-sm"></span></button><button id="command-icon"
                        kendoGridSaveCommand [disabled]="formGroup?.invalid"><span
                            class="k-icon k-i-check k-icon-sm"></span></button><button id="command-icon"
                        kendoGridCancelCommand><span class="k-icon k-i-cancel-outline k-icon-sm"></span></button>
                </ng-template>
            </kendo-grid-command-column>
            <kendo-grid-column field="CNST_SID" title="ID" width="60px" [hidden]="true"
                [headerClass]="{'headerClass':true}" [editable]="false">
                <ng-template kendoGridFilterMenuTemplate let-column="column" let-filter="filter"
                    let-filterService="filterService">
                    <multicheck-filter [isPrimitive]="true" [field]="column.field" [currentFilter]="filter"
                        [filterService]="filterService" [data]="distinctPrimitive(column.field)"></multicheck-filter>
                </ng-template>
            </kendo-grid-column>
            <kendo-grid-column field="CNST_NM" title="Name" width="100" [headerClass]="{'headerClass':true}"
                [editable]="isCnstNmEditable">
                <ng-template kendoGridFilterMenuTemplate let-column="column" let-filter="filter"
                    let-filterService="filterService">
                    <multicheck-filter [isPrimitive]="true" [field]="column.field" [currentFilter]="filter"
                        [filterService]="filterService" [data]="distinctPrimitive(column.field)"></multicheck-filter>
                </ng-template>
                <ng-template kendoGridEditTemplate let-dataItem="dataItem" let-formGroup="formGroup">
                    <kendo-textbox [formControl]="formGroup.get('CNST_NM')"></kendo-textbox>
                </ng-template>
            </kendo-grid-column>
            <kendo-grid-column field="CNST_DESC" title="Description" width="170" [headerClass]="{'headerClass':true}">
                <ng-template kendoGridFilterMenuTemplate let-column="column" let-filter="filter"
                    let-filterService="filterService">
                    <multicheck-filter [isPrimitive]="true" [field]="column.field" [currentFilter]="filter"
                        [filterService]="filterService" [data]="distinctPrimitive(column.field)"></multicheck-filter>
                </ng-template>
                <ng-template kendoGridEditTemplate let-dataItem="dataItem" let-formGroup="formGroup">
                    <kendo-textbox [formControl]="formGroup.get('CNST_DESC')"></kendo-textbox>
                </ng-template>
            </kendo-grid-column>
            <kendo-grid-column field="CNST_VAL_TXT" title="Value" width="180" [headerClass]="{'headerClass':true}">
                <ng-template kendoGridFilterMenuTemplate let-column="column" let-filter="filter"
                    let-filterService="filterService">
                    <multicheck-filter [isPrimitive]="true" [field]="column.field" [currentFilter]="filter"
                        [filterService]="filterService" [data]="distinctPrimitive(column.field)"></multicheck-filter>
                </ng-template>
                <ng-template kendoGridEditTemplate let-dataItem="dataItem" let-formGroup="formGroup">
                    <kendo-textbox [formControl]="formGroup.get('CNST_VAL_TXT')"></kendo-textbox>
                </ng-template>
            </kendo-grid-column>
            <kendo-grid-column field="UI_UPD_FLG" title="UI Updatable" editor="boolean" width="50" filter="boolean"
                [headerClass]="{'headerClass':true}">
                <ng-template kendoGridCellTemplate let-dataItem="dataItem">
                    <div class="text-center">
                        <mat-slide-toggle [color]="color" [checked]="dataItem.UI_UPD_FLG" disabled></mat-slide-toggle>
                    </div>
                </ng-template>
                <ng-template kendoGridEditTemplate let-dataItem="dataItem" let-formGroup="formGroup">
                    <div class="text-center">
                        <mat-slide-toggle [color]="color" [checked]="dataItem.UI_UPD_FLG"
                            [formControl]="formGroup.get('UI_UPD_FLG')"></mat-slide-toggle>
                    </div>
                </ng-template>
            </kendo-grid-column>
        </kendo-grid>
        <kendo-dialog *ngIf="isDialogVisible" (close)="close()" [width]="600">
            <h2>Delete Confirmation</h2>
            <p style="padding: 20px">Are you sure you would like to Delete this Constant ? </p>
            <kendo-dialog-actions><button class="k-button" kendoButton (click)="close()"
                    style="width:100px; color:black; background-color:lightgray; border:none">Cancel </button><button
                    class="k-button" kendoButton (click)="deleteRecord()" style="width:200px">Delete Constant</button>
            </kendo-dialog-actions>
        </kendo-dialog>
    </div>
</div>