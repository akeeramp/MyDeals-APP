﻿<link href="/Client/src/app/admin/kendo_grid.css" rel="stylesheet" />
<div class="row" style="display: contents;">
    <div class="col-md-12" style="padding-left: 30px; padding-top: 24px">
        <h3 class="bottom-reduce">Fun Facts</h3>
    </div>
</div>
<div class="row" style="display: contents;">
    <div class="col-md-12 kendo-grid-buttons table-l-r">
        <kendo-grid class="size-height-inc kAlignHeaders" [data]="gridData" [loading]="isLoading" [pageSize]="state.take" 
                    [skip]="state.skip" [sort]="state.sort" [filter]="state.filter" [sortable]="true"
                    [pageable]="{type:type,pageSizes: pageSizes,info:info}" filterable="menu" [navigable]="true"
                    (dataStateChange)="dataStateChange($event)" (add)="addHandler($event)" (edit)="editHandler($event)"
                    (cancel)="cancelHandler($event)" (save)="saveHandler($event)" (excelExport)="onExcelExport($event)">
            <ng-template kendoGridToolbarTemplate>
                <button kendoGridAddCommand class="k-button addButton">
                    <span class="k-icon k-i-plus-outline k-icon-md"></span>Add New Record
                </button><button (click)="clearFilter()" class="k-button clearButton">
                    <span class="k-icon intelicon-cancel-filter-solid k-icon-md k-family"></span>Clear Filters
                </button>
                <kendo-grid-spacer></kendo-grid-spacer>
                <button type="button" kendoGridExcelCommand>
                    <span class="k-icon k-i-file-excel k-icon-md"></span>Export to Excel
                </button>
                <button (click)="refreshGrid()" class="k-button clearButton">
                    <span class="k-icon k-i-reload k-icon-md"></span>Refresh
                </button>
            </ng-template>
            <kendo-grid-command-column title="" width="150" [headerClass]="{'headerClass':true}">
                <ng-template kendoGridCellTemplate let-isNew="isNew">
                    <div class="text-center">
                        <button id="command-icon" class="k-command-icon" kendoGridEditCommand>
                            <span class="k-icon k-i-edit k-icon-sm edited-icon-color"></span>
                        </button>
                    </div>
                    <div class="text-center">
                        <button id="command-icon" class="k-command-icon" kendoGridSaveCommand>
                            <span class="k-icon k-i-check k-icon-sm"></span>
                        </button>
                        <button id="command-icon" class="k-command-icon" kendoGridCancelCommand>
                            <span class="k-icon k-i-cancel-outline k-icon-sm"></span>
                        </button>
                    </div>
                </ng-template>
            </kendo-grid-command-column>
            <kendo-grid-column field="FACT_SID" title="Id" width="100" [headerClass]="{'headerClass':true}"
                               [editable]="false">
                <ng-template kendoGridEditTemplate let-dataItem="dataItem" let-formGroup="formGroup">
                    <kendo-textbox [formControl]="formGroup.get('FACT_SID')" [clearButton]="true"></kendo-textbox>
                </ng-template>
            </kendo-grid-column>
            <kendo-grid-column field="FACT_TXT" title="Fun Fact" width="500" [headerClass]="{'headerClass':true}">
                <ng-template kendoGridEditTemplate let-dataItem="dataItem" let-formGroup="formGroup">
                    <kendo-textbox [formControl]="formGroup.get('FACT_TXT')" [clearButton]="true"
                                   ngbTooltip="Fun Fact is required" tooltipClass="toolTipReq" placement="bottom" container="body"
                                   triggers="manual" #funFactTooltip="ngbTooltip" [autoClose]="false"></kendo-textbox>
                </ng-template>
            </kendo-grid-column>
            <kendo-grid-column field="FACT_HDR" title="Header" [headerClass]="{'headerClass':true}">
                <ng-template kendoGridFilterMenuTemplate let-column="column" let-filter="filter"
                             let-filterService="filterService">
                    <multicheck-filter [isPrimitive]="true" [field]="column.field" [currentFilter]="filter"
                                       [filterService]="filterService" [data]="distinctPrimitive(column.field)"></multicheck-filter>
                </ng-template>
                <ng-template kendoGridEditTemplate let-dataItem="dataItem" let-formGroup="formGroup">
                    <kendo-textbox [formControl]="formGroup.get('FACT_HDR')" [clearButton]="true"
                                   ngbTooltip="Header is required" tooltipClass="toolTipReq" placement="bottom" container="body"
                                   triggers="manual" #headerTooltip="ngbTooltip" [autoClose]="false"></kendo-textbox>
                </ng-template>
            </kendo-grid-column>
            <kendo-grid-column field="FACT_ICON" title="Font Awesome Icon" [headerClass]="{'headerClass':true}">
                <ng-template kendoGridHeaderTemplate let-column>
                    {{ column.title}} &nbsp; <span kendoTooltip
                                                   position="right">
                        <i class='intelicon-help'
                           title="Pick an icon from fontawesome.com/v4.7.0/icons/"></i>
                    </span>
                </ng-template>
                <ng-template kendoGridFilterMenuTemplate let-column="column" let-filter="filter"
                             let-filterService="filterService">
                    <multicheck-filter [isPrimitive]="true" [field]="column.field" [currentFilter]="filter"
                                       [filterService]="filterService" [data]="distinctPrimitive(column.field)"></multicheck-filter>
                </ng-template>
                <ng-template kendoGridEditTemplate let-dataItem="dataItem" let-formGroup="formGroup">
                    <kendo-textbox [formControl]="formGroup.get('FACT_ICON')" [clearButton]="true"
                                   ngbTooltip="Font Awesome Icon is required" tooltipClass="toolTipReq" placement="bottom"
                                   container="body" triggers="manual" #fontAwesomeTooltip="ngbTooltip" [autoClose]="false">
                    </kendo-textbox>
                </ng-template>
                <ng-template kendoGridCellTemplate let-dataItem>
                    <div class="col-md-2" style="text-align:center;padding:0!important">
                        <i class="fa fa-{{dataItem.FACT_ICON}} ss-funfact-icon" style=" font-size: 26px; color: #0071c5; margin-right: 10px; margin-left: 10px;"></i>
                    </div>
                    <div class='col-md-6'>{{dataItem.FACT_ICON}}</div>
                </ng-template>
            </kendo-grid-column>
            <kendo-grid-column field="FACT_SRC" title="Fact Source/Credentials" [headerClass]="{'headerClass':true}">
                <ng-template kendoGridHeaderTemplate let-column>
                    {{ column.title}} &nbsp; <span kendoTooltip
                                                   position="right">
                        <i class='intelicon-help'
                           title="If copy/pasted, we must legally credit the source."></i>
                    </span>
                </ng-template>
                <ng-template kendoGridEditTemplate let-dataItem="dataItem" let-formGroup="formGroup">
                    <kendo-textbox [formControl]="formGroup.get('FACT_SRC')" [clearButton]="true"></kendo-textbox>
                </ng-template>
            </kendo-grid-column>
            <kendo-grid-column field="ACTV_IND" title="Active" width="130" [headerClass]="{'headerClass':true}"
                               filter="boolean">
                <ng-template kendoGridCellTemplate let-dataItem="dataItem">
                    <div class="text-center">
                        <mat-slide-toggle class="toggle-button-custom" [color]="color" [checked]="dataItem.ACTV_IND" disabled></mat-slide-toggle>
                    </div>
                </ng-template>
                <ng-template kendoGridEditTemplate let-dataItem="dataItem" let-formGroup="formGroup">
                    <div class="text-center">
                        <mat-slide-toggle class="toggle-button-custom" [color]="color" [checked]="dataItem.ACTV_IND"
                                          [formControl]="formGroup.get('ACTV_IND')"></mat-slide-toggle>
                    </div>
                </ng-template>
            </kendo-grid-column>
            <kendo-grid-excel fileName="MyDealsFunFacts.xlsx" [fetchData]="allData">
                <kendo-excelexport-column *ngFor="let item of excelColumns | keyvalue : returnZero" field="{{item.key}}"
                                          title="{{item.value}}" [width]="150" [cellOptions]="cellOptions"
                                          [headerCellOptions]="headerCellOptions"></kendo-excelexport-column>
            </kendo-grid-excel>
        </kendo-grid>
    </div>
</div>