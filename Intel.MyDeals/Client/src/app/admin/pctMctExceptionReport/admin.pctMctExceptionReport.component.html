<link href="/Client/src/app/admin/kendo_grid.css" rel="stylesheet" />
<div>
    <div style="margin-top: 25px;">
        <h2 class="col-md-12">PCT/MCT Failure Report</h2>
    </div>
    <div>
        <div class="row">
            <div class="col-md-12">
                <div class="col-md-2 inputMessage">
                    Select START Year & Quarter:
                </div>
                <div class="col-md-2">
                    <!-- Year Numeric Textbox -->
                    <kendo-numerictextbox class="dateboxborder font-input" [min]="MIN_YEAR" [max]="MAX_YEAR" [autoCorrect]="false" format="#" name="startYear" id="startYear" [(ngModel)]="startYearValue" (ngModelChange)="updateSelectedQuarters()" required></kendo-numerictextbox>
                </div>
                <div class="col-md-2">
                    <!-- Quarter Slider -->
                    <kendo-slider class="sliderwidth" name="startQuarter" id="startQuarter" [min]="1" [max]="4" [smallStep]="1" [largeStep]="1" [showButtons]="true" [vertical]="false" [(ngModel)]="startQuarterValue" (ngModelChange)="updateSelectedQuarters()" required></kendo-slider>
                </div>
            </div>
        </div>
        <div class="row" style="padding-top: 25px;">
            <div class="col-md-12">
                <div class="col-md-2 inputMessage">
                    Select END Year & Quarter:
                </div>
                <div class="col-md-2 k-input-solid">
                    <!-- Year Numeric Textbox -->
                    <kendo-numerictextbox class="dateboxborder font-input" [min]="MIN_YEAR" [max]="MAX_YEAR" [autoCorrect]="false" format="#" name="endYear" id="endYear" [(ngModel)]="endYearValue" (ngModelChange)="updateSelectedQuarters()" required></kendo-numerictextbox>
                </div>
                <div class="col-md-2">
                    <!-- Quarter Slider -->
                    <kendo-slider class="sliderwidth" name="endQuarter" id="endQuarter" [min]="1" [max]="4" [smallStep]="1" [largeStep]="1" [showButtons]="true" [vertical]="false" [(ngModel)]="endQuarterValue" (ngModelChange)="updateSelectedQuarters()" required></kendo-slider>
                </div>
            </div>
        </div>
        <div class="row" style="padding-top: 25px;" [hidden]="calculatedQuarters.length <= 0">
            <div class="col-md-12">
                <div class="col-md-2 inputMessage">
                    Quarters Included:
                </div>
                <div class="col-md-4" style="font-style: italic;">
                    {{ calculatedQuarters }}
                </div>
            </div>
        </div>
        <div class="row" style="padding-top: 25px;" *ngIf="executePCTMCT" >
            <div class="col-md-12">
                <div class="col-md-2 inputMessage">
                    Include Current PCT/MCT Result:
                </div>
                <div class="col-md-4">
                    <p class="includeCurrentCheckBox">
                        <input type="checkbox" class="checkbox-align" [disabled]="batchInProgress" name="includeCurrentResult" id="includeCurrentResult" [(ngModel)]="includeCurrentResult" (change)="validateQtr($event)">
                        <label *ngIf="batchInProgress" class="text-danger">Batch jobs are running, please try again later. Meanwhile you can download report without PCT/MCT run check</label>
                    </p>
                </div>
            </div>
        </div>
        <div class="row" style="padding-top: 25px;">
            <div class="col-md-2 inputMessage" style="padding-left: 30px;">
                <button type="button" class="k-button execute-button" (click)="executeReportLookup()" [disabled]="isYearQuarterSelectionInvalid || isLoading">Download</button>
            </div>
        </div>
        <div class="row" style="padding-top: 25px;">
            <!-- Loader Component -->
            <div *ngIf="isLoading" class="col-12 text-center">
                <span class="k-icon k-i-loading k-icon-xl" style="margin-right: 20px;"></span>Please wait, generating report...
            </div>
        </div>
    </div>
</div>