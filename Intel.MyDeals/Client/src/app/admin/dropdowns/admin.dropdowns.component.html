﻿
<link href="/Client/node_modules/bootstrap/dist/css/bootstrap.min.css" rel="stylesheet" />
<link href="/Client/node_modules/@progress/kendo-theme-bootstrap/dist/all.css" rel="stylesheet" />
<link href="/Client/node_modules/@angular/material/prebuilt-themes/indigo-pink.css" rel="stylesheet" />
<link href="/Client/src/app/admin/kendo_grid.css" rel="stylesheet" />

<div class="row">
    <div class="col-md-12" style="padding-top: 50px; padding-left:35px; padding-bottom: 10px;">
        <h3>UI Dropdown Values</h3>
    </div>
</div>

<div class="row">
    <div class="col-md-12 kendo-grid-buttons">
        <kendo-grid [data]="gridData" [loading]="isLoading" [pageSize]="state.take" [skip]="state.skip" [sort]="state.sort"
                    [filter]="state.filter" [sortable]="true" [pageable]="{type:type,pageSizes: pageSizes,info:info}"
                    [groupable]="false" [group]="state.group" filterable="menu"
                    [navigable]="true" (dataStateChange)="dataStateChange($event)" (add)="addHandler($event)" (edit)="editHandler($event)"
                    (cancel)="cancelHandler($event)" (save)="saveHandler($event)" (remove)="removeHandler($event)">
            <ng-template kendoGridToolbarTemplate>
                <button kendoGridAddCommand class="k-button addButton">
                    <span class="k-icon  k-i-plus-outline k-icon-md"></span>
                    ADD NEW RECORD
                </button>
                <button (click)="clearFilter()" class="k-button clearButton">
                    <span class="k-icon  k-i-filter-clear k-icon-md"></span>
                    CLEAR FILTERS
                </button>
                <kendo-grid-spacer></kendo-grid-spacer>
                <button (click)="refreshGrid()" class="k-button clearButton">
                    <span class="k-icon k-i-reload k-icon-md"></span>
                    Refresh
                </button>
            </ng-template>
            <kendo-grid-command-column title="Commands" width="120" [headerClass]="{'headerClass':true}">
                <ng-template kendoGridCellTemplate let-isNew="isNew">
                    <button id="command-icon" kendoGridEditCommand>
                        <span class="k-icon k-i-edit k-icon-sm"></span>
                    </button>
                    <button kendoGridRemoveCommand id="command-icon" (click)="open()" class="k-button">
                        <span class="k-icon k-i-delete k-icon-sm"></span>
                    </button>
                    <button id="command-icon" kendoGridSaveCommand [disabled]="formGroup?.invalid">
                        <span class="k-icon k-i-check k-icon-sm"></span>
                    </button>
                    <button id="command-icon" kendoGridCancelCommand>
                        <span class="k-icon k-i-cancel-outline k-icon-sm"></span>
                    </button>
                </ng-template>
            </kendo-grid-command-column>
            <kendo-grid-column field="ACTV_IND" title="Is Active" editor="boolean" width="100" filter="boolean" [headerClass]="{'headerClass':true}">
                <ng-template kendoGridCellTemplate let-dataItem="dataItem">
                    <mat-slide-toggle [color]="color"
                                      [checked]="dataItem.ACTV_IND" disabled>
                    </mat-slide-toggle>
                </ng-template>
                <ng-template kendoGridEditTemplate let-dataItem="dataItem" let-formGroup="formGroup">
                    <mat-slide-toggle [color]="color"
                                      [checked]="dataItem.ACTV_IND" [formControl]="formGroup.get('ACTV_IND')">
                    </mat-slide-toggle>
                </ng-template>
            </kendo-grid-column>
            <kendo-grid-column field="OBJ_SET_TYPE_CD" title="Deal Type" width="150" [headerClass]="{'headerClass':true}">
                <ng-template kendoGridFilterMenuTemplate let-column="column" let-filter="filter"
                             let-filterService="filterService">
                    <multicheck-filter [isPrimitive]="true" [field]="column.field" [currentFilter]="filter"
                                       [filterService]="filterService" [data]="distinctPrimitive(column.field)"></multicheck-filter>
                </ng-template>
                <ng-template kendoGridEditTemplate let-dataItem="dataItem" let-formGroup="formGroup">
                    <kendo-combobox #dealtypeDropDown [data]="distinctSetTypeCd" [formControl]="formGroup.get('OBJ_SET_TYPE_CD')"
                                    [allowCustom]="allowCustom">
                    </kendo-combobox>
                </ng-template>
            </kendo-grid-column>
            <kendo-grid-column field="ATRB_CD" title="Group" width="200" [headerClass]="{'headerClass':true}">
                <ng-template kendoGridFilterMenuTemplate let-column="column" let-filter="filter"
                             let-filterService="filterService">
                    <multicheck-filter [isPrimitive]="true" [field]="column.field" [currentFilter]="filter"
                                       [filterService]="filterService" [data]="distinctPrimitive(column.field)"></multicheck-filter>
                </ng-template>
                <ng-template kendoGridEditTemplate let-dataItem="dataItem" let-formGroup="formGroup">
                    <kendo-combobox #attributeDropDown [data]="distinctAtributeCd" [formControl]="formGroup.get('ATRB_CD')" [allowCustom]="allowCustom"
                                    (valueChange)="handleDealTypeChange($event)">
                    </kendo-combobox>
                </ng-template>
            </kendo-grid-column>
            <kendo-grid-column field="CUST_NM" title="Customer" width="200" [headerClass]="{'headerClass':true}">
                <ng-template kendoGridFilterMenuTemplate let-column="column" let-filter="filter"
                             let-filterService="filterService">
                    <multicheck-filter [isPrimitive]="true" [field]="column.field" [currentFilter]="filter"
                                       [filterService]="filterService" [data]="distinctPrimitive(column.field)"></multicheck-filter>
                </ng-template>
                <ng-template kendoGridEditTemplate let-dataItem="dataItem" let-formGroup="formGroup">
                    <kendo-combobox #custDropDown [data]="distinctCustomerName" [formControl]="formGroup.get('CUST_NM')" [allowCustom]="allowCustom">
                    </kendo-combobox>
                </ng-template>
            </kendo-grid-column>
            <kendo-grid-column field="DROP_DOWN" title="Value" width="200" [headerClass]="{'headerClass':true}">
                <ng-template kendoGridFilterMenuTemplate let-column="column" let-filter="filter"
                             let-filterService="filterService">
                    <multicheck-filter [isPrimitive]="true" [field]="column.field" [currentFilter]="filter"
                                       [filterService]="filterService" [data]="distinctPrimitive(column.field)"></multicheck-filter>
                </ng-template>
                <ng-template kendoGridEditTemplate let-dataItem="dataItem" let-formGroup="formGroup">
                    <kendo-textbox [formControl]="formGroup.get('DROP_DOWN')">
                    </kendo-textbox>
                </ng-template>
            </kendo-grid-column>
            <kendo-grid-column field="ATRB_LKUP_DESC" title="Description" width="200" [headerClass]="{'headerClass':true}">
                <ng-template kendoGridFilterMenuTemplate let-column="column" let-filter="filter"
                             let-filterService="filterService">
                    <multicheck-filter [isPrimitive]="true" [field]="column.field" [currentFilter]="filter"
                                       [filterService]="filterService" [data]="distinctPrimitive(column.field)"></multicheck-filter>
                </ng-template>
                <ng-template kendoGridEditTemplate let-dataItem="dataItem" let-formGroup="formGroup">
                    <kendo-textbox [formControl]="formGroup.get('ATRB_LKUP_DESC')">
                    </kendo-textbox>
                </ng-template>
            </kendo-grid-column>
            <kendo-grid-column field="ATRB_LKUP_TTIP" title="Tooltip" width="200" [headerClass]="{'headerClass':true}">
                <ng-template kendoGridFilterMenuTemplate let-column="column" let-filter="filter"
                             let-filterService="filterService">
                    <multicheck-filter [isPrimitive]="true" [field]="column.field" [currentFilter]="filter"
                                       [filterService]="filterService" [data]="distinctPrimitive(column.field)"></multicheck-filter>
                </ng-template>
                <ng-template kendoGridEditTemplate let-dataItem="dataItem" let-formGroup="formGroup">
                    <kendo-textbox [formControl]="formGroup.get('ATRB_LKUP_TTIP')">
                    </kendo-textbox>
                </ng-template>
            </kendo-grid-column>
        </kendo-grid>
        <!--<kendo-dialog title="Please Fix" *ngIf="isCombExists" (close)="saveConfirmation()">
            <p style="margin: 30px; text-align: center;">{{errorMsg}}</p>
            <kendo-dialog-actions>
                <button class='k-button' (click)="saveConfirmation()">OK</button>
            </kendo-dialog-actions>
        </kendo-dialog>-->
        <kendo-dialog *ngIf="isDialogVisible" (close)="close()" [width]="600">
            <h2>Delete Confirmation</h2>
            <p style="padding: 20px">
                Entries currently used in a deal should be deactivated, not deleted. If the entry is currently on a deal it will deactivate instead of deleting.
            </p>
            <kendo-dialog-actions>
                <button class="k-button" kendoButton (click)="close()" style="width:100px; color:black;
                        background-color:lightgray; border:none">
                    Cancel
                </button>
                <button class="k-button" kendoButton (click)="deleteRecord()" style="width:200px">Delete Dropdown</button>
            </kendo-dialog-actions>
        </kendo-dialog>
    </div>
</div>