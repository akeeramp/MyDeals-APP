<link href="/Client/node_modules/bootstrap/dist/css/bootstrap.min.css" rel="stylesheet" />
<link href="/Client/node_modules/@progress/kendo-theme-bootstrap/dist/all.css" rel="stylesheet" />
<link href="/Client/node_modules/@angular/material/prebuilt-themes/indigo-pink.css" rel="stylesheet" />
<link href="/Client/src/app/admin/kendo_grid.css" rel="stylesheet" />
<div class="col-md-12" style="padding-top: 40px;">
    <h2>Rule Ownership</h2>
    <p style="color: #FC4C02">This screen allows Approvers to update owner of the rules</p>
</div>
<div class="col-md-12" *ngIf="IsSecurityCheckDone && !(isElligibleForApproval || IsReadOnlyAccess)" style="text-align: center;color: red;">
    <h3>You do not have a permission to access this page!</h3>
</div>
<div class="col-md-12 kendo-grid-buttons remove-space-border" *ngIf="IsSecurityCheckDone && (isElligibleForApproval || IsReadOnlyAccess)">
    <kendo-grid [data]="gridData" [loading]="isLoading" [pageSize]="state.take" [skip]="state.skip" [sort]="state.sort" [filter]="state.filter" [sortable]="true" [pageable]="{type:type,pageSizes: pageSizes,info:info}" [groupable]="false" [group]="state.group"
        filterable="menu" [navigable]="true" [columnMenu]="true" (dataStateChange)="dataStateChange($event)" (edit)="editHandler($event)" (cancel)="cancelHandler($event)" (save)="saveHandler($event)">
        <ng-template kendoGridToolbarTemplate><button (click)="clearFilter()" class="k-button clearButton"><span
                        class="k-icon intelicon-cancel-filter-solid k-icon-md k-family"></span>CLEAR FILTERS </button>
            <kendo-grid-spacer></kendo-grid-spacer><button (click)="refreshGrid()" class="k-button clearButton"><span class="k-icon k-i-reload k-icon-md"></span>Refresh </button>
        </ng-template>
        <kendo-grid-command-column title="" width="70" [headerClass]="{'headerClass':true}" [columnMenu]="false">
            <ng-template kendoGridCellTemplate let-dataItem="dataItem" let-isNew="isNew"><button id="command-icon" *ngIf="isElligibleForApproval" kendoGridEditCommand><span
                            class="k-icon k-i-edit k-icon-sm"></span></button><button id="command-icon" kendoGridSaveCommand [disabled]="formGroup?.invalid"><span
                            class="k-icon k-i-check k-icon-sm"></span></button><button id="command-icon" kendoGridCancelCommand><span class="k-icon k-i-cancel-outline k-icon-sm"></span></button>
            </ng-template>
        </kendo-grid-command-column>
        <kendo-grid-column field="Name" title="Name" width="200" [headerClass]="{'headerClass':true}" [editable]="false">
            <ng-template kendoGridCellTemplate let-dataItem>#{{dataItem.Id}}:{{dataItem.Name}} </ng-template>
            <ng-template kendoGridFilterMenuTemplate let-column="column" let-filter="filter" let-filterService="filterService">
                <multicheck-filter [isPrimitive]="true" [field]="column.field" [currentFilter]="filter" [filterService]="filterService" [data]="distinctPrimitive(column.field)"></multicheck-filter>
            </ng-template>
        </kendo-grid-column>
        <kendo-grid-column field="OwnerName" title="Owner Name" width="200" [headerClass]="{'headerClass':true}">
            <ng-template kendoGridFilterMenuTemplate let-column="column" let-filter="filter" let-filterService="filterService">
                <multicheck-filter [isPrimitive]="true" [field]="column.field" [currentFilter]="filter" [filterService]="filterService" [data]="distinctPrimitive(column.field)"></multicheck-filter>
            </ng-template>
            <ng-template kendoGridEditTemplate let-dataItem="dataItem" let-formGroup="formGroup">
                <kendo-combobox [data]="dropdownResult" [formControl]="formGroup.get('OwnerName')" textField="displayText" valueField="EMP_WWID" [(ngModel)]="selectedOwner" (valueChange)="ownerNMChange($event)" [allowCustom]="false" [filterable]="true" (filterChange)="handleFilter($event)">
                    <ng-template kendoComboBoxFooterTemplate>
                        <h6><b>Total{{ dropdownResult.length}} DA users found </b></h6>
                    </ng-template>
                </kendo-combobox>
            </ng-template>
        </kendo-grid-column>
    </kendo-grid>
</div>