<link href="/Client/node_modules/@angular/material/prebuilt-themes/indigo-pink.css" rel="stylesheet" />
<link href="/Client/src/app/admin/kendo_grid.css" rel="stylesheet" />
<link href="/Client/node_modules/bootstrap/dist/css/bootstrap.min.css" rel="stylesheet" />
<link href="/Client/node_modules/@progress/kendo-theme-bootstrap/dist/all.css" rel="stylesheet" />
<link href="/Client/src/app/core/gridStatusBoard/gridStatusBoard.component.css" rel="stylesheet" />
<div class="container-fluid widget-container" style="overflow: hidden; height: 100%;">
    <div class="horizontal-widget">
        <div class="left-pane-widget">
            <div class="inner">
                <div id="fltr_All" class="stgLnkBox stgLnk active" [ngClass]="{'active': activekey==='all'===true}" (click)="clkFilter('fltr_All')">
                    <i class="intelicon-workflow-process-outlined"></i> All
                    <span class="badge">{{allStageCnt}}</span>
                </div>
                <div id="fltr_Favorites" class="stgLnkBox stgLnk" [ngClass]="{'active': activekey==='fav'===true}" (click)="clkFilter('fltr_Favorites')"><i class="intelicon-favorite-rating-solid"></i> Favorites <span class="badge">{{favCount}}</span></div>
                <div *ngIf="alertCount > 0" title="Contracts that contain deals with a start date within 48 hours and are not yet approved" id="fltr_HasAlert" class="stgLnkBox stgLnk" [ngClass]="{'active': activekey==='alert'===true}" (click)="clkFilter('fltr_HasAlert')"><i class="intelicon-alert-outlined"></i> Alerts <span class="badge">{{alertCount}}</span></div>
                <h6>Contracts</h6>
                <div class="stgLnkBox">
                    <div class="stgLnk" [ngClass]="{'active': activekey==='allC'===true}" id="fltr_All_Contract" (click)="clkFilter('fltr_All_Contract')"><i class="intelicon-workflow-process-outlined"></i> All <span class="badge">{{contractStageCnt}}</span></div>
                    <div class="stgLnk" [ngClass]="{'active': activekey==='CC'===true}" id="fltr_Complete_Contract" (click)="clkFilter('fltr_Completed_Contract')"><i class="intelicon-workflow-process-outlined"></i> Complete <span class="badge">{{contractComplete}}</span></div>
                    <div class="stgLnk" [ngClass]="{'active': activekey==='ICC'===true}" id="fltr_InComplete_Contract" (click)="clkFilter('fltr_InCompleted_Contract')"><i class="intelicon-workflow-process-outlined"></i> InComplete <span class="badge">{{contractIncomplete}}</span></div>
                </div>
                <h6 style="margin-top: 30px;"><a href="/advancedSearch#/tenderDashboard" style="color: #000000;" title="Click to search for Tender Deals">Tenders</a></h6>
                <div class="stgLnkBox">
                    <div class="stgLnk" [ngClass]="{'active': activekey==='allT'===true}" id="fltr_All_Tender" (click)="clkFilter('fltr_All_Tender')"><i class="intelicon-workflow-process-outlined"></i> All <span class="badge">{{tenderStageCnt}}</span></div>
                    <div class="stgLnk" [ngClass]="{'active': activekey==='CT'===true}" id="fltr_Complete_Tender" (click)="clkFilter('fltr_Complete_Tender')"><i class="intelicon-workflow-process-outlined"></i> Complete <span class="badge">{{tenderComplete}}</span></div>
                    <div class="stgLnk" [ngClass]="{'active': activekey==='ICT'===true}" id="fltr_InComplete_Tender" (click)="clkFilter('fltr_InComplete_Tender')"><i class="intelicon-workflow-process-outlined"></i> InComplete <span class="badge">{{tenderIncomplete}}</span></div>
                    <div class="stgLnk" [ngClass]="{'active': activekey==='CA'===true}" id="fltr_Cancelled_Tender" (click)="clkFilter('fltr_Cancelled_Tender')"><i class="intelicon-workflow-process-outlined"></i> Cancelled <span class="badge">{{tenderCancelled}}</span></div>
                </div>
            </div>
        </div>
        <div class="center-pane-widget">
            <div class="inner container-fluid overflow">
                <kendo-grid [data]="contractDs" [pageSize]="state.take" [skip]="state.skip" [sort]="state.sort" [filter]="state.filter" [sortable]="true" [pageable]="{type:type,pageSizes: pageSizes,info:info,buttonCount:5}" [groupable]="false" [group]="state.group" filterable="menu"
                    [navigable]="true" (dataStateChange)="dataStateChange($event)" class="opUiContainer dashboard dashboard-grid highlightsty-title" [resizable]="true" style="height: 100%;">
                    <kendo-grid-column field="WF_STG_CD" title="&nbsp;" width="20px" [headerClass]="{'headerClass':true}" filterable="none">
                        <ng-template kendoGridCellTemplate let-dataItem>
                            <div class="status Complete" title="Complete" *ngIf="dataItem.WF_STG_CD==='Complete'">
                                C
                            </div>
                            <div class="status InComplete" title="InComplete" *ngIf="dataItem.WF_STG_CD==='InComplete'"> I</div>
                            <div class="status" title="Cancelled" *ngIf="dataItem.WF_STG_CD==='Cancelled'">C</div>
                        </ng-template>
                    </kendo-grid-column>
                    <kendo-grid-column field="IS_TENDER" title="&nbsp;" width="20px" [headerClass]="{'headerClass':true}" filterable="none">
                        <ng-template kendoGridCellTemplate let-dataItem>
                            <div class="status Tender" title="Tender" *ngIf="dataItem.IS_TENDER ===1">
                                T
                            </div>
                            <div class="status Contract" title="Contract" *ngIf="dataItem.IS_TENDER ===0">
                                C
                            </div>
                        </ng-template>
                    </kendo-grid-column>
                    <kendo-grid-column class="gridCell" field="IS_FAVORITE" title="&nbsp;" width="29px" [headerClass]="{'headerClass':true}" [class]="intelicon-favorite-rating-solid" [filterable]="none">
                        <ng-template kendoGridCellTemplate let-dataItem="dataItem" let-rowIndex="rowIndex" ng-click="onFavChange(dataItem)">
                            <div typeof="button" class="intelicon-favorite-rating-solid active" title="Click to add/remove as favorite" *ngIf="dataItem.IS_FAVORITE===true" (click)="onFavChange(dataItem)">
                            </div>
                            <div typeof="button" class="intelicon-favorite-rating-solid" title="Click to add/remove as favorite" *ngIf="dataItem.IS_FAVORITE===false" (click)="onFavChange(dataItem)"></div>
                        </ng-template>
                        {{dataItem}}
                    </kendo-grid-column>
                    <kendo-grid-column class="gridCell" title="Contract Title" field="TITLE" width="200px" [headerClass]="{'headerClass':true}" [filterable]="true">
                        <ng-template kendoGridCellTemplate let-dataItem>
                            <div kendoTooltip filter="div">
                                <div class="textDecoratorWrap" title="{{dataItem.TOOLTIP_CONTENT}}">
                                    <a (click)="goToSelType(dataItem.CNTRCT_OBJ_SID)" title="Click to open the Contract in the Contract Editor" style="cursor:pointer">
                                        <span style="color: #FFA300;">[{{dataItem.CNTRCT_OBJ_SID}}]</span>
                                        <span style="color: #0071c5;"> {{dataItem.TITLE}}</span>
                                    </a>
                                </div>
                            </div>
                        </ng-template>
                    </kendo-grid-column>
                    <kendo-grid-column class="gridCell" title="Customer" field="CUST_NM" width="140px" [headerClass]="{'headerClass':true}" [filterable]="true">
                        <ng-template kendoGridFilterMenuTemplate let-column="column" let-filter="filter" let-filterService="filterService">
                            <multicheck-filter [isPrimitive]="true" [field]="column.field" [currentFilter]="filter" [filterService]="filterService" [data]="distinctPrimitive(column.field)"></multicheck-filter>
                        </ng-template>
                    </kendo-grid-column>
                    <kendo-grid-column class="gridCell" title="Start Date" [width]="120" field="STRT_DTM" format="{0: MM/dd/yyyy}" width="110px" [headerClass]="{'headerClass':true}" [filterable]="true">
                        <ng-template kendoGridFilterMenuTemplate let-filter="filter" let-column="column" let-filterService="filterService">
                            <date-range-filter [field]="column.field" [filter]="filter" [filterService]="filterService">
                            </date-range-filter>
                        </ng-template>
                    </kendo-grid-column>
                    <kendo-grid-column class="gridCell" title="End Date" field="END_DTM" width="110px" format="{0: MM/dd/yyyy}" [headerClass]="{'headerClass':true}" [filterable]="true">
                        <ng-template kendoGridFilterMenuTemplate let-filter="filter" let-column="column" let-filterService="filterService">
                            <date-range-filter [field]="column.field" [filter]="filter" [filterService]="filterService">
                            </date-range-filter>
                        </ng-template>
                    </kendo-grid-column>
                    <kendo-grid-column class="gridCell" title="Notes" field="NOTES" width="170px" [headerClass]="{'headerClass':true}" [filterable]="true">
                    </kendo-grid-column>
                    <div *kendoGridDetailTemplate="let dataItem">
                        <div *ngIf="!isLoaded">
                            <div style="padding-top: 50px;">Retrieving Data. Please wait...</div>
                            <img src="/images/032.gif" />
                        </div>
                        <contract-status-board-angular [contractObjSid]="dataItem.CNTRCT_OBJ_SID"  [angularEnabled]="angularEnabled" (isCntrctDtlLoaded)="cntrctDtlLoadStatus($event)"></contract-status-board-angular>
                    </div>
                </kendo-grid>
            </div>
        </div>
    </div>
</div>