<div *ngIf="!isLoading">
    <div *ngIf="dealCnt">
        <div class="dealTag" style="position: absolute; top: 0; right: 0; z-index: 100; font-size: 16px;">
            {{displayDealTypes()}}
        </div>
    </div>
    <kendo-tabstrip style="background-color: #ffffff !important;">
    <kendo-tabstrip-tab title="ECAP" [selected]="true">
    <!-- <kendo-tabstrip-tab *ngFor="let data of groups" title="{{data.name}}" [selected]="selectedTab === data.name" > -->
        <!-- <ng-template kendoTabTitle>&nbsp;{{data.name}}</ng-template> -->
            <ng-template kendoTabContent>
            <div class="content">
                <div class="toolbar" style="position: absolute; left: 300px; top: 80px; margin-bottom: 10px;">
                    <div class="fr dropdown clearfix" style="margin-right: 2px;">
                        <button class="btn btn-sm ssToolbarBtn dropdown-toggle"
                                id="dropdownMenuOpGrid" aria-expanded="true" type="button" data-toggle="dropdown">
                            <table>
                                <tbody>
                                    <tr>
                                        <td style="border: 0 solid transparent;">
                                            <i class="intelicon-ms-excel-outlined skyBlue"
                                               aria-hidden="true" style="font-size: 30px !important"></i>
                                        </td>
                                        <td class="hidden-md hidden-sm hidden-xs"
                                            style="padding-left: 2px; text-align: left; color: #00AEEF; line-height: 1.2em; border: 0 solid transparent;">
                                            Excel<br>Export
                                        </td>
                                        <td><span class="caret" style="margin-left: 6px;"></span></td>
                                    </tr>
                                </tbody>
                            </table>
                        </button>
                        <ul class="dropdown-menu" role="menu" aria-labelledby="dropdownMenuOpGrid" style="font-size: 13px;">
                            <li (click)="exportToExcel()" style="cursor: pointer;"><a>Export All Columns, All Data</a></li>
                            <li (click)="exportToExcelCustomColumns()" style="cursor: pointer;"><a>Export Current View</a></li>
                        </ul>
                    </div>
                    <div class="fr" style="margin-top: 2px; margin-left: 8px;" *ngIf="!opIsTender">
                        <button class="btn btn-sm ssToolbarBtn btnOverlappingDealCheck" (click)="openOverlappingDealCheck()"
                                title="check for overlapping Deals.">
                            <table>
                                <tr>
                                    <td><i class="intelicon-copy-outlined skyBlue" aria-hidden="true" style="font-size: 30px"></i></td>
                                    <td class="hidden-md hidden-sm hidden-xs"
                                        style="padding-left: 5px; text-align: left; color: #00AEEF;">
                                        Overlapping<br />Deals Check
                                    </td>
                                </tr>
                            </table>
                        </button>
                    </div>
                    <div class="fr" style="margin-top: 2px; margin-left: 8px;">
                        <button class="btn btn-sm ssToolbarBtn"
                                (click)="toggleWrap()" [ngClass]="{'toggleSelect': wrapEnabled}" title="Toggle Word Wrap.">
                            <table>
                                <tr>
                                    <td><i class="intelicon-align-left skyBlue" aria-hidden="true" style="font-size: 30px"></i></td>
                                    <td class="hidden-md hidden-sm hidden-xs"
                                        style="padding-left: 5px; text-align: left; color: #00AEEF;">
                                        Word<br />Wrap
                                    </td>
                                </tr>
                            </table>
                        </button>
                    </div>
                    <div class="fr" style="margin-top: 2px; margin-left: 8px;">
                        <div class="fr helpBtn" title="Help" (click)="showHelpTopicGroup()">
                            <i class="intelicon-help"
                               style="font-size:30px !important"></i>
                        </div>
                    </div>
                    <div class="fr" style="margin-top: 2px; margin-left: 70px;">
                        <span class="k-textbox k-space-left">
                            <i class="intelicon-search" style="font-size: 26px; color: #00AEEF; margin-top: 3px;"></i><input style="width: 290px;" placeholder="Search...(press enter to search)" [(ngModel)]="titleFilter" />
                        </span>
                    </div>
                </div>
                <div class="row" style="margin-left: -36px; padding-top: 28px;margin-top: 15px;">
                    <div class="col-md-12 kendo-grid-buttons">
                        <kendo-grid [data]="gridData" [loading]="isLoading" [pageSize]="state.take" [skip]="state.skip"
                                    [sort]="state.sort" [filter]="state.filter" [sortable]="true"
                                    [pageable]="{type:type,pageSizes: pageSizes,info:info}" [groupable]="false" [group]="state.group"
                                    filterable="menu" [navigable]="true" (dataStateChange)="dataStateChange($event)"
                                    >
                            <kendo-grid-column title="Deal Id" field="DC_ID" [headerClass]="{'headerClass':true}" [width]="120">
                                <ng-template kendoGridFilterMenuTemplate let-column="column" let-filter="filter"
                                let-filterService="filterService">
                                <multicheck-filter [isPrimitive]="true" [field]="column.field" [currentFilter]="filter"
                                    [filterService]="filterService" [data]="distinctPrimitive(column.field)"></multicheck-filter>
                            </ng-template>
                            </kendo-grid-column>
                            <kendo-grid-column title="Validation" field="PASSED_VALIDATION" [headerClass]="{'headerClass':true}" [width]="140">
                                    <ng-template kendoGridFilterMenuTemplate let-column="column" let-filter="filter"
                                    let-filterService="filterService">
                                    <multicheck-filter [isPrimitive]="true" [field]="column.field" [currentFilter]="filter"
                                        [filterService]="filterService" [data]="distinctPrimitive(column.field)"></multicheck-filter>
                                </ng-template>
                                <!-- <i class='intelicon-protection-solid' style='color: #00AEEF; font-size: 20px;'></i> -->
                                <ng-template kendoGridCellTemplate let-dataItem>
                                    <div class='dealLnk'>
                                        <i class='intelicon-protection-solid valid-icon validf_{{dataItem.PASSED_VALIDATION}}' title='Validation:{{ (dataItem.PASSED_VALIDATION==="Dirty" ? "Validation Errors" : dataItem.PASSED_VALIDATION) || "Not validated yet"}}'
                                           [ngClass]='{ "intelicon-protection-solid": (dataItem.PASSED_VALIDATION===undefined || dataItem.PASSED_VALIDATION===""), "intelicon-protection-checked-verified-solid": (dataItem.PASSED_VALIDATION==="Complete"), "intelicon-protection-solid intelicon-alert-solid": (dataItem.PASSED_VALIDATION==="Dirty")}'></i>
                                    </div>
                                </ng-template></kendo-grid-column>
                            <kendo-grid-column title="Customer" field="CUST_MBR_SID" [headerClass]="{'headerClass':true}" [width]="120">
                                <ng-template kendoGridFilterMenuTemplate let-column="column" let-filter="filter"
                                let-filterService="filterService">
                                <multicheck-filter [isPrimitive]="true" [field]="column.field" [currentFilter]="filter"
                                    [filterService]="filterService" [data]="distinctPrimitive(column.field)"></multicheck-filter>
                            </ng-template>
                            <ng-template kendoGridCellTemplate let-dataItem>
                                <div>{{dataItem.Customer.CUST_NM}}
                                </div>
                            </ng-template>
                                <!-- <ng-template kendoGridCellTemplate let-dataItem>
                                    <span style="color: rgb(0, 113, 197); cursor: pointer; text-align: center;">View</span>
                                </ng-template> -->
                            </kendo-grid-column>
                            <kendo-grid-column title="Tracker Number" field="TRKR_NBR" [headerClass]="{'headerClass':true}"
                                               [width]="120">
                                               <ng-template kendoGridFilterMenuTemplate let-column="column" let-filter="filter"
                                               let-filterService="filterService">
                                               <multicheck-filter [isPrimitive]="true" [field]="column.field" [currentFilter]="filter"
                                                   [filterService]="filterService" [data]="distinctPrimitive(column.field)"></multicheck-filter>
                                           </ng-template></kendo-grid-column>
                            <kendo-grid-column title="Deal Start Date" field="START_DT" [headerClass]="{'headerClass':true}"
                                               [width]="120">
                                               <ng-template kendoGridFilterMenuTemplate let-column="column" let-filter="filter"
                                               let-filterService="filterService">
                                               <multicheck-filter [isPrimitive]="true" [field]="column.field" [currentFilter]="filter"
                                                   [filterService]="filterService" [data]="distinctPrimitive(column.field)"></multicheck-filter>
                                           </ng-template></kendo-grid-column>
                            <kendo-grid-column title="Deal End Date" field="END_DT" [headerClass]="{'headerClass':true}"
                                               [width]="120">
                                               <ng-template kendoGridFilterMenuTemplate let-column="column" let-filter="filter"
                                               let-filterService="filterService">
                                               <multicheck-filter [isPrimitive]="true" [field]="column.field" [currentFilter]="filter"
                                                   [filterService]="filterService" [data]="distinctPrimitive(column.field)"></multicheck-filter>
                                           </ng-template></kendo-grid-column>
                            <kendo-grid-column title="Deal Type" field="OBJ_SET_TYPE_CD" [headerClass]="{'headerClass':true}"
                                               [width]="120">
                                               <ng-template kendoGridFilterMenuTemplate let-column="column" let-filter="filter"
                                               let-filterService="filterService">
                                               <multicheck-filter [isPrimitive]="true" [field]="column.field" [currentFilter]="filter"
                                                   [filterService]="filterService" [data]="distinctPrimitive(column.field)"></multicheck-filter>
                                           </ng-template></kendo-grid-column>
                            <kendo-grid-column title="Stage" field="WF_STG_CD" [headerClass]="{'headerClass':true}"
                                               [width]="120">
                                               <ng-template kendoGridFilterMenuTemplate let-column="column" let-filter="filter"
                                               let-filterService="filterService">
                                               <multicheck-filter [isPrimitive]="true" [field]="column.field" [currentFilter]="filter"
                                                   [filterService]="filterService" [data]="distinctPrimitive(column.field)"></multicheck-filter>
                                           </ng-template></kendo-grid-column>
                            <kendo-grid-column title="Product Vertical" field="PRODUCT_CATEGORIES" [headerClass]="{'headerClass':true}" [width]="120">
                                <ng-template kendoGridFilterMenuTemplate let-column="column" let-filter="filter"
                                let-filterService="filterService">
                                <multicheck-filter [isPrimitive]="true" [field]="column.field" [currentFilter]="filter"
                                    [filterService]="filterService" [data]="distinctPrimitive(column.field)"></multicheck-filter>
                            </ng-template>
                            </kendo-grid-column>
                            <kendo-grid-column title="My Deals Product" field="TITLE" [headerClass]="{'headerClass':true}" [width]="120">
                                <ng-template kendoGridFilterMenuTemplate let-column="column" let-filter="filter"
                                let-filterService="filterService">
                                <multicheck-filter [isPrimitive]="true" [field]="column.field" [currentFilter]="filter"
                                    [filterService]="filterService" [data]="distinctPrimitive(column.field)"></multicheck-filter>
                            </ng-template></kendo-grid-column>
                            <kendo-grid-column title="Group Type" field="DEAL_COMB_TYPE" [headerClass]="{'headerClass':true}" [width]="120">
                                <ng-template kendoGridFilterMenuTemplate let-column="column" let-filter="filter"
                                let-filterService="filterService">
                                <multicheck-filter [isPrimitive]="true" [field]="column.field" [currentFilter]="filter"
                                    [filterService]="filterService" [data]="distinctPrimitive(column.field)"></multicheck-filter>
                            </ng-template>
                            </kendo-grid-column>
                            <kendo-grid-column title="Deal Description" field="DEAL_DESC"
                                               [headerClass]="{'headerClass':true}" [width]="120">
                                <ng-template kendoGridFilterMenuTemplate let-column="column" let-filter="filter"
                                let-filterService="filterService">
                                <multicheck-filter [isPrimitive]="true" [field]="column.field" [currentFilter]="filter"
                                    [filterService]="filterService" [data]="distinctPrimitive(column.field)"></multicheck-filter>
                            </ng-template></kendo-grid-column>
                            <kendo-grid-column title="ECAP Price" field="ECAP_PRICE" [headerClass]="{'headerClass':true}"
                                               [width]="120">
                                               <ng-template kendoGridCellTemplate let-dataItem>
                                                <span>
                                                    {{
                             getFormatedDim(dataItem, 'ECAP_PRICE',
                                                    '20___0','currency')
                                                    }}
                                                </span>
                                            </ng-template></kendo-grid-column>
                            <kendo-grid-column title="Ceiling Volume" field="VOLUME" [headerClass]="{'headerClass':true}"
                            [width]="120">
                            <ng-template kendoGridFilterMenuTemplate let-column="column" let-filter="filter"
                            let-filterService="filterService">
                            <multicheck-filter [isPrimitive]="true" [field]="column.field" [currentFilter]="filter"
                                [filterService]="filterService" [data]="distinctPrimitive(column.field)"></multicheck-filter>
                        </ng-template>
                        </kendo-grid-column>
                            <kendo-grid-column title="Consumption Reason" field="CONSUMPTION_REASON" [headerClass]="{'headerClass':true}"
                            [width]="120">
                            <ng-template kendoGridFilterMenuTemplate let-column="column" let-filter="filter"
                            let-filterService="filterService">
                            <multicheck-filter [isPrimitive]="true" [field]="column.field" [currentFilter]="filter"
                                [filterService]="filterService" [data]="distinctPrimitive(column.field)"></multicheck-filter>
                        </ng-template></kendo-grid-column>
                            <kendo-grid-column title="Payout Based On" field="PAYOUT_BASED_ON" [headerClass]="{'headerClass':true}"
                            [width]="120">
                            <ng-template kendoGridFilterMenuTemplate let-column="column" let-filter="filter"
                            let-filterService="filterService">
                            <multicheck-filter [isPrimitive]="true" [field]="column.field" [currentFilter]="filter"
                                [filterService]="filterService" [data]="distinctPrimitive(column.field)"></multicheck-filter>
                        </ng-template></kendo-grid-column>
                            <kendo-grid-column title="Program Payment" field="MRKT_SEG" [headerClass]="{'headerClass':true}"
                                               [width]="160">
                                               <ng-template kendoGridFilterMenuTemplate let-column="column" let-filter="filter"
                                               let-filterService="filterService">
                                               <multicheck-filter [isPrimitive]="true" [field]="column.field" [currentFilter]="filter"
                                                   [filterService]="filterService" [data]="distinctPrimitive(column.field)"></multicheck-filter>
                                           </ng-template></kendo-grid-column>
                            <kendo-grid-column title="Program Payment" field="PROGRAM_PAYMENT" [headerClass]="{'headerClass':true}" [width]="120">
                                <ng-template kendoGridFilterMenuTemplate let-column="column" let-filter="filter"
                                let-filterService="filterService">
                                <multicheck-filter [isPrimitive]="true" [field]="column.field" [currentFilter]="filter"
                                    [filterService]="filterService" [data]="distinctPrimitive(column.field)"></multicheck-filter>
                            </ng-template>
                            </kendo-grid-column>
                            <kendo-grid-column title="Market Segment" field="MRKT_SEG" [headerClass]="{'headerClass':true}" [width]="120">
                                <ng-template kendoGridFilterMenuTemplate let-column="column" let-filter="filter"
                                let-filterService="filterService">
                                <multicheck-filter [isPrimitive]="true" [field]="column.field" [currentFilter]="filter"
                                    [filterService]="filterService" [data]="distinctPrimitive(column.field)"></multicheck-filter>
                            </ng-template>
                            </kendo-grid-column>
                            <kendo-grid-column title="Geo" field="GEO_COMBINED"
                                               [headerClass]="{'headerClass':true}" [width]="160">
                                               <ng-template kendoGridFilterMenuTemplate let-column="column" let-filter="filter"
                                               let-filterService="filterService">
                                               <multicheck-filter [isPrimitive]="true" [field]="column.field" [currentFilter]="filter"
                                                   [filterService]="filterService" [data]="distinctPrimitive(column.field)"></multicheck-filter>
                                           </ng-template></kendo-grid-column>
                            <kendo-grid-column title="Rebate Type" field="REBATE_TYPE"
                            [headerClass]="{'headerClass':true}" [width]="160">
                            <ng-template kendoGridFilterMenuTemplate let-column="column" let-filter="filter"
                            let-filterService="filterService">
                            <multicheck-filter [isPrimitive]="true" [field]="column.field" [currentFilter]="filter"
                                [filterService]="filterService" [data]="distinctPrimitive(column.field)"></multicheck-filter>
                        </ng-template></kendo-grid-column>

                            <kendo-grid-column title="Additional Ts And Cs" field="TERMS"
                            [headerClass]="{'headerClass':true}" [width]="160">
                            <ng-template kendoGridFilterMenuTemplate let-column="column" let-filter="filter"
                            let-filterService="filterService">
                            <multicheck-filter [isPrimitive]="true" [field]="column.field" [currentFilter]="filter"
                                [filterService]="filterService" [data]="distinctPrimitive(column.field)"></multicheck-filter>
                        </ng-template></kendo-grid-column>

                            <kendo-grid-column title="Notes" field="NOTES" [headerClass]="{'headerClass':true}" [width]="160">
                                <ng-template kendoGridFilterMenuTemplate let-column="column" let-filter="filter"
                                let-filterService="filterService">
                                <multicheck-filter [isPrimitive]="true" [field]="column.field" [currentFilter]="filter"
                                    [filterService]="filterService" [data]="distinctPrimitive(column.field)"></multicheck-filter>
                            </ng-template>
                            </kendo-grid-column>
                        </kendo-grid>
                    </div>
                </div>
            </div>
        </ng-template>
    </kendo-tabstrip-tab>
</kendo-tabstrip>
</div>
<loading-panel-angular id="AllDealsLoading" style="z-index: 500" [show]="isLoading" [header]="spinnerMessageHeader"></loading-panel-angular>

