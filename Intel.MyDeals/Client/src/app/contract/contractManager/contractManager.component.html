<div id="sum-wrapper" class="contractManagerPlus" *ngIf="showData">
    <div id="sum-header" style="min-width: 800px;height:106px">
        <div class="divine-pro" style="font-size: 14px; line-height: 1.1em; text-align: center; position: absolute; top: 11px; right: 25px;">            
            <span class="cust_title_style">Customer Acceptance</span>
            <span id="toggle-container" [ngClass]=" { 'acceptanceNotRequired' : custAccptButton == 'Acceptance Not Required in C2A' }" [ngStyle]=" { 'cursor' : custAccptButton == 'Acceptance Not Required in C2A' ? 'not-allowed' : 'auto'}"
             [title]="((isCustAcptReadOnly == true && custAccptButton !== 'Pending')|| custAccptButton == 'Acceptance Not Required in C2A') ? '' :'Click to Change Contract Acceptance Criteria'">
               <kendo-switch class="contract-toggle"
                              offLabel="{{ offLabelName }}" onLabel="Pending"
                              [disabled]="(isCustAcptReadOnly == true && custAccptButton !== 'Pending') || custAccptButton == 'Acceptance Not Required in C2A'"
                              (valueChange)="pendingChange()"
                              [(ngModel)]="isToggle">
                </kendo-switch>
            </span>
        </div>
        <div id="manageHeaderbakground" class="sum-filter-bar add-sub-sum" style="padding: 1px 10px;">
            <table style="width: 100%;">
                <tr>
                    <td style="width: 30px; height: 40px;" (click)="toggleSum()" title="{{ !isAllCollapsed ? 'Collapse All' : 'Expand All'}}" [ngClass]="{'rotate-90': !isAllCollapsed}">
                        <i class="chevron linkable intelicon-fast-forward ivon-css"></i>
                    </td>
                    <td style="width: 55px; text-align: center;" *ngIf="canEdit">
                        <div class="all-fixes-label">
                            <div style="font-size: 11px; line-height: 1em; margin-bottom: -5px;">All</div>
                            <input type="checkbox" name="allRadGrp" class="with-font" id="all_rad_approve" (click)="clkAllRow($event, 'Approve')" [(ngModel)]="approveCheckBox" />
                            <label class="all-labels" for="all_rad_approve"></label>
                        </div>
                    </td>
                    <td style="width: 50px; text-align: center;" *ngIf="canEdit">
                        <div class="all-fixes-label">
                            <div style="font-size: 11px; line-height: 1em; margin-bottom: -5px;">All</div>
                            <input type="checkbox" name="allRadGrp" class="with-font" id="all_rad_revise" (click)="clkAllRow($event, 'Revise')" [(ngModel)]="reviseCheckBox" />
                            <label class="all-labels" for="all_rad_revise"></label>
                        </div>
                    </td>
                    <td style="width: 50px; text-align: center;">
                        <div class="all-fixes-label">
                            <div style="font-size: 11px; line-height: 1em; margin-bottom: -5px;">All</div>
                            <input type="checkbox" name="allRadGrp" class="with-font" id="all_rad_email" (click)="clkAllRow($event, 'Email')" [(ngModel)]="emailCheckBox" />
                            <label class="all-labels" for="all_rad_email"></label>
                        </div>
                    </td>
                    <td style="width: 100px; text-align: center;" nowrap>
                        <div class="btn-group" style="display:inline-flex !important">
                            <button class="btn btn-sm btn-skyblue view-complex-one" type="button" (click)="clearFilter()" title="Click to clear the filter" style="padding: 2px 7px 0px 10px; margin-right: 1px; margin-top: -2px; border-right: 1px solid #0071C5 !important;height:30px !important">
                                <i class="fa fa-filter" aria-hidden="true" style="font-size: 18px;"></i>
                            </button>
                            <button class="btn btn-sm btn-skyblue view-complex-two dropdown-toggle dropdown-toggle-blue" aria-expanded="false" type="button" data-toggle="dropdown" style="margin-top: -2px;padding: 2px 14px 0px 10px;height:30px !important">
                                <span class="caret throw-css"></span><span class="sr-only">Toggle Dropdown</span>
                            </button>
                            <div class="dropdown-menu" role="menu">
                                <div *ngFor="let ps of contractData?.PRC_ST | unique:'WF_STG_CD' | orderBy:'WF_STG_CD'">
                                    <input type="checkbox" class="stgChkBox" id="item{{ps.DC_ID}}" (change)="hasFilter()" [(ngModel)]="ps.filtered" /><label for="item{{ps.DC_ID}}" id="stage-fontLabel">{{ps.WF_STG_CD}}</label>
                                </div>
                            </div>
                        </div>
                    </td>
                    <td>
                        <div class="fr helpBtn" title="Help" (click)="showingHelpTopicContract()"><i class="intelicon-help" style="font-size:30px !important"></i></div>
                    </td>
                    <td style="width: 50px; text-align: center;"></td>
                    <td>
                        <span class="k-textbox design" style="width: 300px; margin-top: -4px;">
                            <i class="intelicon-search" style="font-size: 26px; color: #00AEEF; margin-top: 3px;"></i>
                            <input style="width: 290px; border: none; outline: none;" placeholder="Search for Pricing Strategy or Pricing Table" [value]="titleFilter" (keyup)="updateTitleFilter()" [(ngModel)]="titleFilter" />
                        </span>
                    </td>
                    <td style="width:500px;text-align:right;padding-right:2px;">
                        <div class="dropdown clearfix fr temp-btns" style="padding-top:5px;">
                            <button kendoButton class="btn btn-skyblue dropdown-toggle dropdown-toggle-blue" id="dropActionss" type="button" (click)="submitContract()" title="Submit Approval, Revision and Cancel requests or send an email"
                                    *ngIf="!submitModal">
                                Submit
                            </button>
                            <kendo-dialog id="caDialog" *ngIf="submitModal" (close)="close('cancel')" [width]="350" class="k-dialog-popup-design">
                                <p class="hstyle">No Pricing Strategies were selected.</p>
                                <kendo-dialog-actions><button class="cancel-btn-pop-up" kendoButton (click)="close('no')">OK</button></kendo-dialog-actions>
                            </kendo-dialog>
                            <kendo-dialog class="cm-pop-up blue-popup-design" *ngIf="showMultipleDialog">
                                <div class="modal-header modalBlueBody">
                                    <h5 class="modal-title" id="modal-title">Multiple Pricing Tables</h5>
                                </div>
                                <div class="modal-body modalBlueBody" id="modal-body">

                                    <div>This Pricing Strategy contains multiple Pricing Tables.Please select which Pricing</div>
                                    <p style="text-align: left;"> Table you would like to view:</p>

                                    <div style="margin: 20px 0; max-height: 190px; overflow: auto; padding: 5px;">
                                        <div *ngFor="let pte of pteTableData">
                                            <button class="btn btn-primary btn-full btn_color_fix" type="button" (click)="pickPt(pte)">{{pte.DC_ID}} - {{pte.TITLE}}</button>
                                        </div>
                                    </div>

                                    <div class="row">
                                        <div class="col-md-12">
                                            <div class="fr">
                                                <button class="btn btn-warning cancel_color_fix cancel-yellow" type="button" style="margin-right: 8px;" (click)="closeMultiple()">Cancel</button>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </kendo-dialog>
                            <kendo-dialog *ngIf="showPendingWarning" class="dialogPending contract_manager_dialog" [width]="500" [height]="300">
                                <div class="wrn-red corrrection-text" style="text-align: left;"><i class="intelicon-information-solid"></i> Correction Required</div>
                                <div *ngIf="showPendingInfo">
                                    <div class="contract_manage_correction">
                                        <p style="text-align: left">C2A Contract # or attaching the contract associated with this deal is required in order to change your contract from Pending to Accepted.</p>
                                        <div style="text-align: center; margin-top: 34px;">
                                            <button class="btn btn-sm btn-skyblue contract_manager_file" type="button" (click)="showPending('showPendingFile')">
                                                <div style="text-align: center;">
                                                    <div><i class="intelicon-attach-document-outlined" style="font-size: 60px;"></i></div>
                                                    Attach Contract
                                                </div>
                                            </button>
                                            <button class="btn btn-sm btn-skyblue contract_manager_file" type="button" (click)="showPending('showPendingC2A')">
                                                <div style="text-align: center;">
                                                    <div><i class="intelicon-user-approved-selected-outlined" style="font-size: 60px;"></i></div>
                                                        Add C2A Contract #
                                                </div>
                                            </button>
                                        </div>
                                    </div>
                                    <div style="text-align: center;">
                                        <button class="btn btn-sm btn-grey contract_correction_cancel" type="button" (click)="closeDialog()" style="margin: 0 10px -30px 10px; width: 110px;">
                                            Cancel
                                        </button>
                                    </div>
                                </div>
                                <div *ngIf="showPendingFile">
                                    <div class="contract_manage_uploadscreen">
                                        <p style="text-align: left">
                                            Attach the contract associated with this deal to change your My Deals contract from Pending to Accepted.
                                        </p>
                                        <div class="f1 opUiLabel opUiLableWidth" style="text-align: left" [ngClass]="{isRequired: contractData.IsAttachmentRequired}"> &nbsp;&nbsp;&nbsp;&nbsp;Attachment(s):&nbsp;
                                            <span kendoTooltip class="opElementHelpIcon contract-tooltip-style intelicon-information-outlined" k-content="constants.helptipMsgAttachment"
                                                  title="Attach multiple files.&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;&emsp;Allowed File Types: doc, xls, txt, bmp, jpg, pdf, ppt, zip, xlsx, docx, pptx, odt, ods, ott, sxw, sxc, png, 7z, xps."
                                                  position="top" [tooltipWidth]="300">
                                            </span>
                                        </div>
                                        <kendo-upload class="contract-correction-upload"
                                                      [saveUrl]="uploadSaveUrl"
                                                      [removeUrl]="uploadRemoveUrl"
                                                      [concurrent]="false"
                                                      [multiple]="true"
                                                      [restrictions]="myRestrictions"
                                                      (upload)="uploadEventHandler($event)"
                                                      (success)="successEventHandler()"
                                                      [(ngModel)]="files"
                                                      (error)="onFileUploadError()"></kendo-upload>
                                    </div>
                                    <div style="text-align: center;">
                                        <button class="btn btn-sm btn-grey contract_correction_backbtn" type="button" 
                                                [ngClass]="{'disabled': contractData.HAS_ATTACHED_FILES === '1'}"
                                                (click)="showPending('showPendingInfo')" style="margin: 0 10px -30px 10px; width: 110px;">
                                            << Back
                                        </button>
                                        <button class="btn btn-sm btn-skyblue contract_done_btn" type="button" 
                                                [ngClass]="{'disabled': !contractData.HAS_ATTACHED_FILES}"
                                                (click)="continueAction(true,null)" style="margin: 0 10px -30px 10px; width: 110px;">
                                            Done
                                        </button>
                                    </div>
                                </div>
                                <div *ngIf="showPendingC2A">
                                    <div class="c2a-popup-style">
                                        <p style="text-align: left;">
                                            Enter C2A Contract # for this deal to change your My Deals contract from Pending to Accepted.
                                        <p style="margin-top: 20px;text-align: left;">
                                            C2A Contract #:<br />
                                            <span>
                                                <input type="text" placeholder="Enter C2A Number"
                                                       [(ngModel)]="contractData.C2A_DATA_C2A_ID" style="width: 260px; padding: 4px;color:#444 !important">
                                                <button class="btn btn-skyblue" style="width: 130px !important; margin: -2px 10px 0 10px; width: 110px;" type="button"
                                                        [ngClass]="{'disabled': (contractData.C2A_DATA_C2A_ID.trim() === '' )}" [disabled]="contractData.C2A_DATA_C2A_ID.trim() === ''"
                                                        (click)="(contractData.C2A_DATA_C2A_ID.trim() === '' ) || continueAction(true,null)">
                                                    Use C2A Number
                                                </button>
                                            </span>
                                        </p>
                                        <p style="color: yellow; font-size: 14px;text-align: left; ">Please note, values longer than 18 characters will be truncated in Vistex.  Characters (like semicolons) not supported by Vistex will also be removed.</p>
                                    </div>
                                    <div style="text-align: center;">
                                        <button class="btn btn-sm btn-grey c2a-back-btnstyle" type="button" (click)="showPending('showPendingInfo')" style="margin: 0 10px -30px 10px; width: 110px;">
                                            << Back
                                        </button>
                                    </div>
                                </div>                     
                            </kendo-dialog>                           
                        </div>
                    </td>
                </tr>
            </table>
        </div>
        <div style="border-bottom: 1px solid #555; padding: 6px 0; background-color: #fff;">
            <table style="width: 100%; margin-top:0;" class="tbl-header">
                <tr>
                    <td style="width: 30px;">&nbsp;</td>
                    <td style="width: 60px; border-right: 1px solid #000000; text-align: center;" *ngIf="canEdit">
                        Approve
                    </td>
                    <td style="width: 50px; border-right: 1px solid #000000; text-align: center;" *ngIf="canEdit">
                        Revise
                    </td>
                    <td style="width: 50px; border-right: 1px solid #000000; text-align: center;" *ngIf="canEdit">
                        Email
                    </td>
                    <td style="width: 100px; text-align: center;">Stage</td>
                    <td style="width: 50px; text-align: center;">Valid</td>
                    <td style="line-height: 1.1em;">Pricing Strategy / Pricing Table</td>
                    <td style="width: 150px; text-align: center;">
                        <div title='Is complex stacking reviewed.'>
                            Complex Stacking
                        </div>
                    </td>
                    <td style="width: 150px; text-align: center;" *ngIf="userRole=='GA' || userRole=='SA'">
                        <div title='Deals missing Cost and/or CAP cannot be approved by Division Approvers until the missing data has been added. For urgent issues, contact TAC.'>
                            Missing Cost/CAP
                        </div>
                    </td>
                    <td *ngIf="CAN_VIEW_COST_TEST" style="width: 160px; text-align: center; ">
                        <span *ngIf="enabledPCT">
                            <button class="btn btn-sm btn-skyblue-sm fl"
                                    (click)="executePctViaBtn('pct')"
                                    title="Execute Price Cost Test and Meet Comp Test"
                                    style="padding-left:100px">
                                <i class="fa fa-refresh fa-fw iconRunPct" [ngClass]="isRunning ? 'fa-spin grn' : '' " [ngStyle]="{'color' : (pctClicked) ? 'black' : '' }" aria-hidden="true" style="font-size: 20px"></i>
                            </button>
                        </span>
                        Price Cost Test
                        <div class="btnLastRu" style="font-size: 9px; color: #00AEEF; line-height: 0.01em;" [ngStyle]="{' margin-left' : enabledPCT? '0px':'35px'}">
                            {{lastRunDisplay('Price Cost Test')}}
                        </div>
                    </td>
                    <td *ngIf="CAN_VIEW_MEET_COMP" style="width: 160px; text-align: center;">
                        <span *ngIf="enabledPCT">
                            <button class="btn btn-sm btn-skyblue-sm fl"
                                    (click)="executePctViaBtn('mct')"
                                    title="Execute Price Cost Test and Meet Comp Test"
                                    style="padding-left:100px">
                                <i class="fa fa-refresh fa-fw iconRunPct" [ngClass]="isRunning ? 'fa-spin grn' : '' " [ngStyle]="{'color' : (mctClicked) ? 'black' : '' }" aria-hidden="true" style="font-size: 20px"></i>
                            </button>
                        </span>
                        Meet Comp Test
                        <div class="btnLastRu" style="font-size: 9px; color: #00AEEF; line-height:0.01em;" [ngStyle]="{' margin-left' : enabledPCT? '0px':'30px'}">
                            {{lastRunDisplay('Meet Comp Test')}}
                        </div>
                    </td>
                </tr>
            </table>
        </div>
    </div>
    <div id="sum-container">
        <div class="sum-main-body">
            <div class="sum-main-container collectContractManagers"  style="line-height: 1 !important;">
                <div *ngFor="let ps of filteredData ;let psIndex=index" class="sumPsContainer">
                    <table style="width: 100%;">
                        <tr>
                            <td style="width: 30px; height: 30px;" id="PRC_ST_{{ps.DC_ID}}" (click)="isPSExpanded[psIndex]=!isPSExpanded[psIndex]">
                                <i class="chevron linkable collapseALL" [ngClass]="{'intelicon-down': isPSExpanded[psIndex], 'intelicon-right-next': !isPSExpanded[psIndex]}"></i>
                            </td>
                            <td style="width: 60px; text-align: center;" *ngIf="canEdit" class="approveChkBox">
                                <div *ngIf="canAction('Approve', ps, true) && canActionIcon && hasVertical(ps) && !(ps._actions.Approve==true && ps.WF_STG_CD=='Approved')" [ngbTooltip]="ps._actionReasons.Approve" placement="right" [hidden]="!(ps.WF_STG_CD !=='Pending')">
                                    <input type="checkbox" name="radGrp{{ps.DC_ID}}" [ngClass]="{'disabled': !canAction('Approve', ps, false)}" [(ngModel)]="apprvCheck[ps.DC_ID]" [disabled]="!canAction('Approve', ps, false)" class="with-font psCheck psCheck-Approve"
                                           id="rad_approve_{{ps.DC_ID}}" kendoCheckBox (click)="onCheckboxChange('approveCheckBox',$event,ps)" /><label for="rad_approve_{{ps.DC_ID}}"></label>
                                </div>
                            </td>
                            <td style="width: 50px; text-align: center;" *ngIf="canEdit">
                                <div *ngIf="canAction('Revise', ps, true) && canActionIcon && hasVertical(ps)" title="{{actionReason('Revise', ps)}}">
                                    <input type="checkbox" name="radGrp{{ps.DC_ID}}" [(ngModel)]="reviseCheck[ps.DC_ID]" [ngClass]="{'disabled': !canAction('Revise', ps, false)}" [disabled]="!canAction('Revise', ps, false)" class="with-font psCheck psCheck-Revise"
                                           id="rad_revise_{{ps.DC_ID}}" (click)="onCheckboxChange('reviseCheckBox',$event,ps)" kendoCheckBox /><label for="rad_revise_{{ps.DC_ID}}"></label>
                                </div>
                            </td>
                            <td style="width: 50px; text-align: center;">
                                <div *ngIf="canEmailIcon && hasVertical(ps)" title="email pricing strategy"><input type="checkbox" name="radGrp{{ps.DC_ID}}" [(ngModel)]="emailCheck[ps.DC_ID]" class="with-font psCheck psCheck-Email" id="rad_email_{{ps.DC_ID}}" (click)="onCheckboxChange('emailCheckBox',$event,ps)" /><label for="rad_email_{{ps.DC_ID}}"></label></div>
                            </td>
                            <td style="width: 100px; text-align: center;">
                                <div class="stage">
                                    <div [textContent]="ps.WF_STG_CD || 'no stage'" [ngStyle]="getStageBgColorStyle(ps.WF_STG_CD)"></div>
                                </div>
                            </td>
                            <td style="width: 50px; text-align: center;">
                                <i class="intelicon-protection-checked-verified-solid bigIcon validf_{{ps.PASSED_VALIDATION}}" *ngIf="ps.PASSED_VALIDATION==='Complete'" title="{{ps.PASSED_VALIDATION}}"></i><i class="intelicon-protection-checked-verified-solid bigIcon validf_{{ps.PASSED_VALIDATION}}" *ngIf="ps.PASSED_VALIDATION==='Finalizing'" title="{{ps.PASSED_VALIDATION}}"></i><i class="intelicon-protection-checked-verified-solid bigIcon validf_{{ps.PASSED_VALIDATION}}" *ngIf="ps.PASSED_VALIDATION==='Valid'" title="{{ps.PASSED_VALIDATION}}"></i>
                                <i class="intelicon-alert-solid bigIcon validf_{{ps.PASSED_VALIDATION}}" *ngIf="ps.PASSED_VALIDATION==='Dirty'" title="{{ (ps.PASSED_VALIDATION==='Dirty' ? 'Validation Errors: Fix in Deal Editor' : ps.PASSED_VALIDATION) || 'Not validated yet'}}"></i>
                                <i class="intelicon-protection-solid bigIcon validf_{{ps.PASSED_VALIDATION}}" *ngIf="ps.PASSED_VALIDATION !=='Valid' && ps.PASSED_VALIDATION !=='Dirty' && ps.PASSED_VALIDATION !=='Complete' && ps.PASSED_VALIDATION !=='Finalizing'" title="{{ps.PASSED_VALIDATION || 'Not validated yet'}}"></i>
                            </td>
                            <td>
                                <div [textContent]="ps.TITLE" class="bolder linkable" title="Click to open the Pricing Strategy in the Contract Editor" (click)="openPTEeditor(ps)"></div>
                            </td>
                            <td style="width: 150px; text-align: center;">
                                <div *ngIf="IsCSReviewed(ps.IS_CS_GRP_REVIEWED);then rev_content else non_rev_content">here is ignored</div>
                                <ng-template #rev_content>
                                    <i class="intelicon-protection-checked-verified-solid bigIcon validf_Complete" title="Reviewed"></i>
                                </ng-template>
                                <ng-template #non_rev_content>
                                    <i (click)="onComplexStackingReviewActn($event, ps)" style="cursor: pointer" class="intelicon-information-solid bigIcon validf_Valid" title="Not reviewed yet; Click to Review"></i>
                                </ng-template>
                            </td>
                            <td style="width: 160px; text-align: center;" *ngIf="userRole=='GA' || userRole=='SA'">
                                <i *ngIf="ps.CAP_MISSING_FLG !=='0' && ps.COST_MISSING_FLG !=='0'"></i><i *ngIf="ps.CAP_MISSING_FLG==='1' || ps.COST_MISSING_FLG==='1'" style="color:#f3d54e"
                                                                                                          class="intelicon-help-solid bigIcon" title="{{getmissingCapCostTitle(ps)}}"></i>
                            </td>
                            <td class="bigIcon" style="width: 160px; text-align: center;" *ngIf="ps?._settings?.CAN_VIEW_COST_TEST || PCTResultView" (click)="loadModel('pctDiv')">
                                <icon-mct-pct-angular ngDefaultControl [(ngModel)]="ps.COST_TEST_RESULT" [dataValue]="ps.COST_TEST_RESULT" [canEdit]="CAN_EDIT_COST_TEST" [iconClass]="bigIcon"></icon-mct-pct-angular>
                            </td>
                            <td class="bigIcon" style="width: 160px; text-align: center;" *ngIf="ps?._settings?.CAN_VIEW_MEET_COMP" (click)="loadModel('MeetComp')">
                                <icon-mct-pct-angular ngDefaultControl [(ngModel)]="ps.MEETCOMP_TEST_RESULT" [dataValue]="ps.MEETCOMP_TEST_RESULT" [canEdit]="CAN_VIEW_MEET_COMP" [iconClass]="bigIcon"></icon-mct-pct-angular>
                            </td>
                        </tr>
                    </table>
                    <div *ngFor="let pt of ps.PRC_TBL;let i=index">
                        <div class="collapse multi-collapse" id="PSData_{{psIndex}}" [ngClass]="{show : isPSExpanded[psIndex]}">
                            <table style="width: 100%; ">
                                <tr id="detail_{{pt.DC_ID}}">
                                    <td style="width: 20px;" *ngIf="canEdit"></td>
                                    <td style="width: 271px; height: 30px; text-align: right;" *ngIf="canEdit">
                                        <i class="chevron linkable" data-toggle="collapse" [attr.data-target]="'#sumWipGrid_'+ pt.DC_ID" (click)="togglePt(pt)" [ngClass]="{'intelicon-down': isPTExpanded[pt.DC_ID], 'intelicon-right-next': !isPTExpanded[pt.DC_ID]}"></i>
                                    </td>
                                    <td style="width: 30px; height: 30px; text-align: right;" (click)="isPtCollapsed=!isPtCollapsed; togglePt( pt)" [hidden]="canEdit">
                                        <button class="chevron linkable" type="button" data-toggle="collapse" [attr.data-target]="'#sumWipGrid_'+'{{pt.DC_ID}}'" (click)="togglePt( pt)"></button>
                                    </td>
                                    <td style="width: 50px; padding-left: 17px;">
                                        <div class="textCircle{{ pt.WIP_WORK_FLG==='1' ? '_NeedsWork': ''}} valid_{{ pt.PASSED_VALIDATION}}" title="{{ (pt.PASSED_VALIDATION==='Dirty' ? 'Validation Errors' : pt.PASSED_VALIDATION) || 'Not validated yet'}}{{pt.WIP_WORK_FLG==='1' ? ' - Some deals still require attention': ''}}">
                                            {{ pt.OBJ_SET_TYPE_CD | slice:0:1}}
                                        </div>
                                    </td>
                                    <td>
                                        <div [textContent]="pt.TITLE" class="bold linkable" title="Click to open the Pricing Table in the Contract Editor" (click)="openPTE(ps.DC_PARENT_ID, ps.DC_ID, pt.DC_ID)"></div>
                                    </td>
                                    <td style="width: 160px; text-align: center;" *ngIf="userRole=='GA'">
                                        <i *ngIf="pt.CAP_MISSING_FLG !=='0' && pt.COST_MISSING_FLG !=='0'" style="color:#c4d600" class="intelicon-passed-completed-solid medIcon"></i><i *ngIf="pt.CAP_MISSING_FLG==='1' || pt.COST_MISSING_FLG==='1'" style="color:#f3d54e" title="{{getmissingCapCostTitle(pt)}}" class="intelicon-help-solid medIcon"></i>
                                    </td>
                                    <td class="medIcon" style="width: 160px; text-align: center;" *ngIf="ps?._settings?.CAN_VIEW_COST_TEST || PCTResultView">
                                        <a class="lnkIcon" [ngClass]="{'noPointer': !CAN_EDIT_COST_TEST}">
                                            <icon-mct-pct-angular ngDefaultControl [dataValue]="pt.COST_TEST_RESULT" [(ngModel)]="pt.COST_TEST_RESULT" [canEdit]='CAN_EDIT_COST_TEST' [iconClass]="medIcon"></icon-mct-pct-angular>
                                        </a>
                                    </td>
                                    <td class="medIcon" style="width: 160px; text-align: center;" *ngIf="ps?._settings?.CAN_VIEW_MEET_COMP">
                                        <a class="lnkIcon" [ngClass]="{'noPointer': !CAN_VIEW_MEET_COMP}">
                                            <icon-mct-pct-angular ngDefaultControl [dataValue]="pt.MEETCOMP_TEST_RESULT" [(ngModel)]="pt.MEETCOMP_TEST_RESULT" [canEdit]="CAN_VIEW_MEET_COMP" [iconClass]="medIcon"></icon-mct-pct-angular>
                                        </a>
                                    </td>
                                </tr>
                            </table>
                            <div class="collapse" id="sumWipGrid_{{pt.DC_ID}}">
                                <div style="margin-left: 0">
                                    <div class="opUiContainer md dashboard">
                                        <div id='detailGrid_{{pt.DC_ID}}' class='opUiContainer md dashboard sumGridOptionsExpand oppo-grids new-now-wrap space-table-all'>
                                            <span *ngIf="gridDataSet[pt.DC_ID]==undefined" class="k-i-loading loading-design-custom">
                                                <span style="margin-left: 6em; font-size:10px;">Loading.....</span>
                                            </span>
                                            <kendo-grid id="manageFilterStyle" class="approval-tables" *ngIf="state[pt.DC_ID].filter != undefined && gridDataSet[pt.DC_ID]!=undefined" [data]="gridDataSet[pt.DC_ID]"
                                                        [resizable]="true" [filter]="state[pt.DC_ID].filter" [sortable]="true" filterable="menu" (dataStateChange)="dataStateChange($event, pt.DC_ID)" style="height:fit-content;max-height:470px">
                                                <kendo-grid-column title="Tools" field="NOTES" [headerClass]="{'headerClass':true}" [width]="200" [locked]="true" [filterable]="false" [sortable]="false">
                                                    <ng-template kendoGridHeaderTemplate>
                                                        <div>
                                                            <input type='checkbox' (click)="selectAllIDs($event, pt.DC_ID)" class='grid-link-checkbox with-font' id='chkDealTools_{{pt.DC_ID}}' />&nbsp;
                                                            <label for='chkDealTools_{{pt.DC_ID}}'><b>Tools</b></label>
                                                        </div>
                                                    </ng-template>
                                                    <ng-template let-dataItem="dataItem" kendoGridCellTemplate>
                                                        <deal-tools-angular [dataItem]='dataItem' [isSplitEnabled]='false' [isFileAttachmentEnabled]='true'
                                                                            [isHistoryEnabled]='true' [isCommentEnabled]='true' [isEditable]='true'
                                                                            [isQuoteLetterEnabled]='true' [isDeleteEnabled]='false' [gridResult]="gridDataSet[pt.DC_ID]" [gridData]="gridDataSet[pt.DC_ID]" [contractData]="contractData"
                                                                            (refreshContract)="refreshContractData($event)" [isManageTab]="true"></deal-tools-angular>
                                                    </ng-template>
                                                </kendo-grid-column>
                                                <kendo-grid-column title="Deal Id" field="DC_ID" [headerClass]="{'headerClass':true}" [width]="120" [locked]="true">
                                                    <ng-template kendoGridFilterMenuTemplate let-column="column" let-filter="filter"
                                                                 let-filterService="filterService">
                                                        <multicheck-filter [isPrimitive]="true" [field]="column.field" [currentFilter]="filter"
                                                                           [filterService]="filterService" [data]="filteringData[pt.DC_ID][column.field]"></multicheck-filter>
                                                    </ng-template>
                                                    <ng-template kendoGridCellTemplate let-dataItem>
                                                        <div class='dealLnk' style="display:flex">
                                                            <deal-popup-icon [dealId]="dataItem.DC_ID"></deal-popup-icon>
                                                            <i style="margin-top:5px" class='intelicon-protection-solid valid-icon validf_{{dataItem.PASSED_VALIDATION}}' title='Validation:{{ (dataItem.PASSED_VALIDATION==="Dirty" ? "Validation Errors" : dataItem.PASSED_VALIDATION) || "Not validated yet"}}'
                                                               [ngClass]='{ "intelicon-protection-solid": (dataItem.PASSED_VALIDATION===undefined || dataItem.PASSED_VALIDATION===""), "intelicon-protection-checked-verified-solid": (dataItem.PASSED_VALIDATION==="Complete"), "intelicon-protection-solid intelicon-alert-solid": (dataItem.PASSED_VALIDATION==="Dirty")}'></i>
                                                            <span style="margin-top:7px">{{dataItem.DC_ID}}</span>
                                                        </div>
                                                    </ng-template>
                                                </kendo-grid-column>
                                                <kendo-grid-column title="Tracker Number" field="TRKR_NBR" [headerClass]="{'headerClass':true}" [width]="160" [locked]="true" filterable="false">
                                                    <ng-template kendoGridCellTemplate let-dataItem>
                                                        <span [innerHtml]="concatDimElements(dataItem,'TRKR_NBR')"></span>
                                                    </ng-template>
                                                </kendo-grid-column>
                                                <kendo-grid-column title="Type" field="OBJ_SET_TYPE_CD" [headerClass]="{'headerClass':true}" [width]="100">
                                                    <ng-template kendoGridFilterMenuTemplate let-column="column" let-filter="filter"
                                                                 let-filterService="filterService">
                                                        <multicheck-filter [isPrimitive]="true" [field]="column.field" [currentFilter]="filter"
                                                                           [filterService]="filterService" [data]="filteringData[pt.DC_ID][column.field]"></multicheck-filter>
                                                    </ng-template>
                                                </kendo-grid-column>
                                                <kendo-grid-column title="Row Type" field="FLEX_ROW_TYPE" [headerClass]="{'headerClass':true}" [width]="100" [hidden]="isFlexRowTypeHidden(pt.OBJ_SET_TYPE_CD)">
                                                    <ng-template kendoGridCellTemplate let-dataItem>
                                                        {{ dataItem.FLEX_ROW_TYPE }}
                                                    </ng-template>
                                                </kendo-grid-column>
                                                <kendo-grid-column title="Deal Start/End" field="START_DT" [headerClass]="{'headerClass':true}" [width]="175">
                                                    <ng-template kendoGridFilterMenuTemplate let-column="column" let-filter="filter"
                                                                 let-filterService="filterService">
                                                        <multicheck-filter [isPrimitive]="false" [field]="column.field" [currentFilter]="filter" textField="Text" valueField="Value"
                                                                           [filterService]="filterService" [data]="filteringData[pt.DC_ID][column.field]"></multicheck-filter>
                                                    </ng-template>
                                                    <ng-template kendoGridCellTemplate let-dataItem>
                                                        {{dataItem.START_DT | date: 'M/d/yyyy'}}-{{dataItem?.END_DT | date: 'M/d/yyyy'}}
                                                    </ng-template>
                                                </kendo-grid-column>
                                                <kendo-grid-column title="OEM Platform Launch Date" [width]="170" field="OEM_PLTFRM_LNCH_DT" [headerClass]="{'headerClass':true}" [hidden]="!OtherType[pt.DC_ID]">
                                                    <ng-template kendoGridCellTemplate let-dataItem><span *ngIf="dataItem.OEM_PLTFRM_LNCH_DT!='1/1/1900'">{{dataItem.OEM_PLTFRM_LNCH_DT| date: 'M/d/yyyy'}}</span></ng-template>
                                                </kendo-grid-column>
                                                <kendo-grid-column title="OEM Platform EOL Date" [width]="170" field="OEM_PLTFRM_EOL_DT" [headerClass]="{'headerClass':true}" [hidden]="!OtherType[pt.DC_ID]">
                                                    <ng-template kendoGridCellTemplate let-dataItem>
                                                        {{dataItem.OEM_PLTFRM_EOL_DT | date: 'M/d/yyyy'}}
                                                    </ng-template>
                                                </kendo-grid-column>
                                                <kendo-grid-column title="Product" field="TITLE" [headerClass]="{'headerClass':true}" [width]="120">
                                                    <ng-template kendoGridFilterMenuTemplate let-column="column" let-filter="filter"
                                                                 let-filterService="filterService">
                                                        <multicheck-filter [isPrimitive]="true" [field]="column.field" [currentFilter]="filter"
                                                                           [filterService]="filterService" [data]="filteringData[pt.DC_ID][column.field]"></multicheck-filter>
                                                    </ng-template>
                                                </kendo-grid-column>
                                                <kendo-grid-column title="KIT CAP" field="CAP_KIT" [headerClass]="{'headerClass':true}" [width]="100" [hidden]="!isKIT[pt.DC_ID]" filterable="false">
                                                    <ng-template kendoGridCellTemplate let-dataItem>
                                                        <span>
                                                            {{getFormatedDim(dataItem, 'CAP', '20_____1', 'currency')}}
                                                        </span>
                                                    </ng-template>
                                                </kendo-grid-column>
                                                <kendo-grid-column title="KIT ECAP" field="ECAP_PRICE" [headerClass]="{'headerClass':true}" [width]="100" [hidden]="!isKIT[pt.DC_ID]" filterable="false">
                                                    <ng-template kendoGridCellTemplate let-dataItem><span>{{ getFormatedDim(dataItem, 'ECAP_PRICE', '20_____1', 'currency')}}</span></ng-template>
                                                </kendo-grid-column>
                                                <kendo-grid-column title="CAP" field="CAP" [headerClass]="{'headerClass':true}" [width]="100" [hidden]="!isECAP[pt.DC_ID]" filterable="false">
                                                    <ng-template kendoGridCellTemplate let-dataItem>
                                                        <span>
                                                            {{getFormatedDim(dataItem, 'CAP', '20___0', 'currency')}}
                                                        </span>
                                                    </ng-template>
                                                </kendo-grid-column>
                                                <kendo-grid-column title="ECAP" field="ECAP_PRICE" [headerClass]="{'headerClass':true}" [width]="100" [hidden]="!isECAP[pt.DC_ID]" filterable="false">
                                                    <ng-template kendoGridCellTemplate let-dataItem><span>{{ getFormatedDim(dataItem, 'ECAP_PRICE', '20___0','currency')}}</span></ng-template>
                                                </kendo-grid-column>
                                                <kendo-grid-column title="YCS2" field="YCS2_PRC_IRBT" [headerClass]="{'headerClass':true}" [width]="100" [hidden]="!isECAP[pt.DC_ID]" filterable="false">
                                                    <ng-template kendoGridCellTemplate let-dataItem><span>{{getFormatedDim(dataItem, 'YCS2_PRC_IRBT', '20___0','currency')}}</span></ng-template>
                                                </kendo-grid-column>
                                                <kendo-grid-column title="KIT YCS2" field="YCS2_PRC_IRBT" [headerClass]="{'headerClass':true}" [width]="100" [hidden]="!isKIT[pt.DC_ID]" filterable="false">
                                                    <ng-template kendoGridCellTemplate let-dataItem><span>{{getFormatedDim(dataItem, 'YCS2_PRC_IRBT','20_____1', 'currency')}}</span></ng-template>
                                                </kendo-grid-column>
                                                <kendo-grid-column title="Rebate Type" field="REBATE_TYPE" [headerClass]="{'headerClass':true}" [width]="120">
                                                    <ng-template kendoGridFilterMenuTemplate let-column="column" let-filter="filter"
                                                                 let-filterService="filterService">
                                                        <multicheck-filter [isPrimitive]="true" [field]="column.field" [currentFilter]="filter"
                                                                           [filterService]="filterService" [data]="filteringData[pt.DC_ID][column.field]"></multicheck-filter>
                                                    </ng-template>
                                                </kendo-grid-column>
                                                <kendo-grid-column title="Cost Test Result" field="COST_TEST_RESULT" [headerClass]="{'headerClass':true}" [width]="130" [hidden]="!CAN_VIEW_COST_TEST">
                                                    <ng-template kendoGridFilterMenuTemplate let-column="column" let-filter="filter"
                                                                 let-filterService="filterService">
                                                        <multicheck-filter [isPrimitive]="true" [field]="column.field" [currentFilter]="filter"
                                                                           [filterService]="filterService" [data]="filteringData[pt.DC_ID][column.field]"></multicheck-filter>
                                                    </ng-template>
                                                </kendo-grid-column>
                                                <kendo-grid-column title="Comp SKU" field="COMP_SKU" [headerClass]="{'headerClass':true}" [width]="100" [hidden]="!CAN_VIEW_COST_TEST">
                                                    <ng-template kendoGridCellTemplate let-dataItem let-rowIndex="rowIndex"><span>{{getFormatedDim(dataItem, 'COMP_SKU', '20___0','string')}}</span></ng-template>
                                                </kendo-grid-column>
                                                <kendo-grid-column title="Comp Price" field="COMPETITIVE_PRICE" [headerClass]="{'headerClass':true}" [width]="100" [hidden]="!CAN_VIEW_COST_TEST">
                                                    <ng-template kendoGridCellTemplate let-dataItem let-rowIndex="rowIndex"><span>{{getFormatedDim(dataItem, 'COMPETITIVE_PRICE','20___0', 'currency')}}</span></ng-template>
                                                </kendo-grid-column>
                                                <kendo-grid-column title="Meet Comp Test Result" field="MEETCOMP_TEST_RESULT" [headerClass]="{'headerClass':true}" [width]="140" [hidden]="!CAN_VIEW_MEET_COMP">
                                                    <ng-template kendoGridFilterMenuTemplate let-column="column" let-filter="filter"
                                                                 let-filterService="filterService">
                                                        <multicheck-filter [isPrimitive]="true" [field]="column.field" [currentFilter]="filter"
                                                                           [filterService]="filterService" [data]="filteringData[pt.DC_ID][column.field]"></multicheck-filter>
                                                    </ng-template>
                                                </kendo-grid-column>
                                                <kendo-grid-column title="Program $" field="TOTAL_DOLLAR_AMOUNT" [headerClass]="{'headerClass':true}" [width]="120" [hidden]="isProgramDollarHidden(pt.OBJ_SET_TYPE_CD)">
                                                    <ng-template kendoGridFilterMenuTemplate let-filter let-column="column" let-filterService="filterService">
                                                        <!-- 
                                                            TWC3119-875: Disabled the Equals operator
                                                            -----------------------------------------
                                                            There is an issue in Kendo grid with decimalized numbers where the 'Is equal to' filter does not return any values,
                                                            the best we can do in the mean time is to use the 'Contains' filter, which isn't ideal, but we either need to create
                                                            a custom filter operator (which seems it's probably not supported by Kendo Grid) or to see if an updated version of 
                                                            Kendo Grid fixes this issue; All other numerical operators work correctly
                                                         -->
                                                        <kendo-grid-numeric-filter-menu [column]="column" [filter]="filter" [filterService]="filterService" operator="contains">
                                                            <kendo-filter-contains-operator></kendo-filter-contains-operator>
                                                            <!-- <kendo-filter-eq-operator></kendo-filter-eq-operator> -->
                                                            <kendo-filter-neq-operator></kendo-filter-neq-operator>
                                                            <kendo-filter-gte-operator></kendo-filter-gte-operator>
                                                            <kendo-filter-gt-operator></kendo-filter-gt-operator>
                                                            <kendo-filter-lte-operator></kendo-filter-lte-operator>
                                                            <kendo-filter-lt-operator></kendo-filter-lt-operator>
                                                        </kendo-grid-numeric-filter-menu>
                                                    </ng-template>
                                                    <ng-template kendoGridCellTemplate let-dataItem>
                                                        {{ dataItem.TOTAL_DOLLAR_AMOUNT | currency }}
                                                    </ng-template>
                                                </kendo-grid-column>
                                                <kendo-grid-column title="Max RPU" field="MAX_RPU" [headerClass]="{'headerClass':true}" [width]="120" [hidden]="!OtherType[pt.DC_ID]">
                                                    <ng-template kendoGridFilterMenuTemplate let-filter let-column="column" let-filterService="filterService">
                                                        <kendo-grid-numeric-filter-menu [column]="column" [filter]="filter" [filterService]="filterService" operator="contains">
                                                            <kendo-filter-contains-operator></kendo-filter-contains-operator>
                                                            <!-- <kendo-filter-eq-operator></kendo-filter-eq-operator> -->
                                                            <kendo-filter-neq-operator></kendo-filter-neq-operator>
                                                            <kendo-filter-gte-operator></kendo-filter-gte-operator>
                                                            <kendo-filter-gt-operator></kendo-filter-gt-operator>
                                                            <kendo-filter-lte-operator></kendo-filter-lte-operator>
                                                            <kendo-filter-lt-operator></kendo-filter-lt-operator>
                                                        </kendo-grid-numeric-filter-menu>
                                                    </ng-template>
                                                    <ng-template kendoGridCellTemplate let-dataItem>
                                                        {{ dataItem.MAX_RPU | currency }}
                                                    </ng-template>
                                                </kendo-grid-column>
                                                <kendo-grid-column title="Ceiling Volume" field="VOLUME" [headerClass]="{'headerClass':true}" [width]="100" [hidden]="OtherType[pt.DC_ID]">
                                                    <ng-template kendoGridFilterMenuTemplate let-column="column" let-filter="filter"
                                                                 let-filterService="filterService">
                                                        <multicheck-filter [isPrimitive]="true" [field]="column.field" [currentFilter]="filter"
                                                                           [filterService]="filterService" [data]="filteringData[pt.DC_ID][column.field]"></multicheck-filter>
                                                    </ng-template>
                                                </kendo-grid-column>
                                                <kendo-grid-column title="End Customer" field="END_CUSTOMER_RETAIL" [headerClass]="{'headerClass':true}" [width]="150" [hidden]="OtherType[pt.DC_ID]">
                                                    <ng-template kendoGridFilterMenuTemplate let-column="column" let-filter="filter"
                                                                 let-filterService="filterService">
                                                        <multicheck-filter [isPrimitive]="true" [field]="column.field" [currentFilter]="filter"
                                                                           [filterService]="filterService" [data]="filteringData[pt.DC_ID][column.field]"></multicheck-filter>
                                                    </ng-template>
                                                </kendo-grid-column>
                                                <kendo-grid-column title="Deal Description" field="DEAL_DESC" [headerClass]="{'headerClass':true}" [width]="150">
                                                    <ng-template kendoGridFilterMenuTemplate let-column="column" let-filter="filter"
                                                                 let-filterService="filterService">
                                                        <multicheck-filter [isPrimitive]="true" [field]="column.field" [currentFilter]="filter"
                                                                           [filterService]="filterService" [data]="filteringData[pt.DC_ID][column.field]"></multicheck-filter>
                                                    </ng-template>
                                                </kendo-grid-column>
                                                <kendo-grid-column title="Stage" field="WF_STG_CD" [headerClass]="{'headerClass':true}" [width]="100">
                                                    <ng-template kendoGridFilterMenuTemplate let-column="column" let-filter="filter"
                                                                 let-filterService="filterService">
                                                        <multicheck-filter [isPrimitive]="true" [field]="column.field" [currentFilter]="filter"
                                                                           [filterService]="filterService" [data]="filteringData[pt.DC_ID][column.field]"></multicheck-filter>
                                                    </ng-template>
                                                </kendo-grid-column>
                                                <kendo-grid-column title="Expired" field="EXPIRE_FLG" [headerClass]="{'headerClass':true}" [width]="100">
                                                    <ng-template kendoGridFilterMenuTemplate let-column="column" let-filter="filter"
                                                                 let-filterService="filterService">
                                                        <multicheck-filter [isPrimitive]="true" [field]="column.field" [currentFilter]="filter"
                                                                           [filterService]="filterService" [data]="filteringData[pt.DC_ID][column.field]"></multicheck-filter>
                                                    </ng-template>
                                                </kendo-grid-column>
                                                <kendo-grid-column title="Attachments" field="HAS_ATTACHED_FILES" [headerClass]="{'headerClass':true}" [width]="120"></kendo-grid-column>
                                            </kendo-grid>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div [hidden]="initialLoad && !(isDeveloper || isTester) && !drawChart" [ngStyle]="{ 'top': initialLoad ? '86%' : '75%'}" style="position: absolute;bottom: 0; right: 5px;">
            <performance-bars [type]="perfModel"></performance-bars>
        </div>
        <kendo-window class="wistyle" *ngIf="windowOpened" (close)="windowClose()" (click)="singleClick()" [minWidth]="windowMinWidth" [minHeight]="windowMinHeight" [width]="windowWidth" [top]="windowTop" [left]="windowLeft">
            <kendo-window-titlebar>
                <div class="k-window-title arrow-window-title">Results</div><button kendoWindowCloseAction class="close-icon"></button>
            </kendo-window-titlebar>
            <message-board-dialog [data]="messages" [contractData]="contractData" (isWindowOpened)="isWindowOpened($event)" ></message-board-dialog>
        </kendo-window> 
    </div>
</div>

<div *ngIf="!showData" style="height:100vh;padding-top: 200px; width: 100%; text-align: center;" class="contractManagerSpinner">
    <div class="spinner">
        <div class="rect1"></div>
        <div class="rect2"></div>
        <div class="rect3"></div>
        <div class="rect4"></div>
        <div class="rect5"></div>
    </div>
    <div style="font-size: 30px;">{{loadMessage}}</div>
    <div class="ss-icon-lg" *ngIf="loadMessage == 'Done'">
        <i class="intelicon-passed-completed-solid sky-blue"></i>
    </div>
</div>
<loading-panel-angular style="margin:auto !important" [show]="isLoading" [header]="spinnerMessageHeader" [description]="spinnerMessageDescription" [isShowFunFact]="true" [msgType]="'msgType'" class="second-load-style">
</loading-panel-angular>